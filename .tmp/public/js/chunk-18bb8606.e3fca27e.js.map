{"version":3,"sources":["webpack:///./node_modules/vuetify/lib/components/VDataTable/VEditDialog.js","webpack:///./src/components/widgets/form/parts/metadata-tab.vue?4018","webpack:///./src/components/core/ext/key-value-list.vue?7112","webpack:///src/components/core/ext/key-value-list.vue","webpack:///./src/components/core/ext/key-value-list.vue?410e","webpack:///./src/components/core/ext/key-value-list.vue","webpack:///src/components/widgets/form/parts/metadata-tab.vue","webpack:///./src/components/widgets/form/parts/metadata-tab.vue?87fd","webpack:///./src/components/widgets/form/parts/metadata-tab.vue"],"names":["extend","name","props","cancelText","default","large","Boolean","eager","persistent","saveText","transition","type","String","isActive","watch","val","this","$emit","setTimeout","focus","methods","input","$refs","content","querySelector","fn","text","$createElement","color","light","on","click","class","genButton","cancel","save","returnValue","staticClass","keydown","e","keyCode","esc","enter","ref","$slots","h","themeClasses","contentClass","origin","right","value","closeOnClick","closeOnContentClick","dark","scopedSlots","activator","genContent","genActions","render","_vm","_c","_self","attrs","form","metadata","staticRenderFns","staticStyle","headers","items","Number","POSITIVE_INFINITY","_u","key","_g","$event","add","_v","selected","length","remove","proxy","key_","onSave","item","onEdit","required","unique","model","callback","$$v","expression","_s","value_","object","_e","mixins","editedItem","v","filter","d","updated","map","component","VBtn","VDataTable","VDivider","VEditDialog","VIcon","VRow","VSpacer","VTextField","VTooltip","components","computed","newMetadataKey","newMetadataValue","showNewMetadataDialog","m","validate","editable","prepare","updatedMeta","forEach","JSON","parse","stringify","undefined","selection","index","i","splice","updateMetadata","data","VCard"],"mappings":"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","file":"js/chunk-18bb8606.e3fca27e.js","sourcesContent":["// Styles\nimport \"../../../src/components/VDataTable/VEditDialog.sass\"; // Mixins\n\nimport Returnable from '../../mixins/returnable';\nimport Themeable from '../../mixins/themeable'; // Utils\n\nimport { keyCodes } from '../../util/helpers'; // Component\n\nimport VBtn from '../VBtn';\nimport VMenu from '../VMenu';\nimport mixins from '../../util/mixins';\n/* @vue/component */\n\nexport default mixins(Returnable, Themeable).extend({\n  name: 'v-edit-dialog',\n  props: {\n    cancelText: {\n      default: 'Cancel'\n    },\n    large: Boolean,\n    eager: Boolean,\n    persistent: Boolean,\n    saveText: {\n      default: 'Save'\n    },\n    transition: {\n      type: String,\n      default: 'slide-x-reverse-transition'\n    }\n  },\n\n  data() {\n    return {\n      isActive: false\n    };\n  },\n\n  watch: {\n    isActive(val) {\n      if (val) {\n        this.$emit('open');\n        setTimeout(this.focus, 50); // Give DOM time to paint\n      } else {\n        this.$emit('close');\n      }\n    }\n\n  },\n  methods: {\n    cancel() {\n      this.isActive = false;\n      this.$emit('cancel');\n    },\n\n    focus() {\n      const input = this.$refs.content.querySelector('input');\n      input && input.focus();\n    },\n\n    genButton(fn, text) {\n      return this.$createElement(VBtn, {\n        props: {\n          text: true,\n          color: 'primary',\n          light: true\n        },\n        on: {\n          click: fn\n        }\n      }, text);\n    },\n\n    genActions() {\n      return this.$createElement('div', {\n        class: 'v-small-dialog__actions'\n      }, [this.genButton(this.cancel, this.cancelText), this.genButton(() => {\n        this.save(this.returnValue);\n        this.$emit('save');\n      }, this.saveText)]);\n    },\n\n    genContent() {\n      return this.$createElement('div', {\n        staticClass: 'v-small-dialog__content',\n        on: {\n          keydown: e => {\n            e.keyCode === keyCodes.esc && this.cancel();\n\n            if (e.keyCode === keyCodes.enter) {\n              this.save(this.returnValue);\n              this.$emit('save');\n            }\n          }\n        },\n        ref: 'content'\n      }, [this.$slots.input]);\n    }\n\n  },\n\n  render(h) {\n    return h(VMenu, {\n      staticClass: 'v-small-dialog',\n      class: this.themeClasses,\n      props: {\n        contentClass: 'v-small-dialog__menu-content',\n        transition: this.transition,\n        origin: 'top right',\n        right: true,\n        value: this.isActive,\n        closeOnClick: !this.persistent,\n        closeOnContentClick: false,\n        eager: this.eager,\n        light: this.light,\n        dark: this.dark\n      },\n      on: {\n        input: val => this.isActive = val\n      },\n      scopedSlots: {\n        activator: ({\n          on\n        }) => {\n          return h('div', {\n            staticClass: 'v-small-dialog__activator',\n            on\n          }, [h('span', {\n            staticClass: 'v-small-dialog__activator__content'\n          }, this.$slots.default)]);\n        }\n      }\n    }, [this.genContent(), this.large ? this.genActions() : null]);\n  }\n\n});\n//# sourceMappingURL=VEditDialog.js.map","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('v-card',{attrs:{\"flat\":\"\"}},[_c('key-value-editor',{attrs:{\"object\":_vm.form.metadata,\"value\":\"value\"}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.items)?_c('div',[_c('v-data-table',{staticStyle:{\"display\":\"inline-grid\"},attrs:{\"headers\":_vm.headers,\"items\":_vm.items,\"dense\":\"\",\"show-select\":\"\",\"hide-default-footer\":\"\",\"items-per-page\":Number.POSITIVE_INFINITY},scopedSlots:_vm._u([{key:\"top\",fn:function(){return [_c('v-row',{staticClass:\"mx-2 my-0\"},[_c('v-spacer'),_c('v-tooltip',{attrs:{\"top\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on }){return [_c('v-btn',_vm._g({staticClass:\"primary--text pr-1\",attrs:{\"icon\":\"\",\"small\":\"\"},on:{\"click\":function($event){return _vm.add()}}},on),[_c('v-icon',[_vm._v(\"mdi-plus\")])],1)]}}],null,false,4198300025)},[_c('span',[_vm._v(\"Add\")])]),_c('v-tooltip',{attrs:{\"top\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on }){return [_c('v-btn',_vm._g({staticClass:\"primary--text pr-1\",attrs:{\"icon\":\"\",\"small\":\"\",\"disabled\":_vm.selected.length == 0},on:{\"click\":function($event){return _vm.remove()}}},on),[_c('v-icon',[_vm._v(\"mdi-trash-can-outline\")])],1)]}}],null,false,4157316921)},[_c('span',[_vm._v(\"Remove\")])])],1),_c('v-divider')]},proxy:true},{key:\"item.key\",fn:function(props){return [_c('v-edit-dialog',{attrs:{\"return-value\":_vm.key_},on:{\"update:returnValue\":function($event){_vm.key_=$event},\"update:return-value\":function($event){_vm.key_=$event},\"save\":function($event){return _vm.onSave(props.item)},\"open\":function($event){return _vm.onEdit(props.item)}},scopedSlots:_vm._u([{key:\"input\",fn:function(){return [_c('v-text-field',{attrs:{\"rules\":[_vm.required, _vm.unique],\"required\":\"\",\"label\":\"Edit\",\"single-line\":\"\"},model:{value:(_vm.key_),callback:function ($$v) {_vm.key_=$$v},expression:\"key_\"}})]},proxy:true}],null,true)},[_vm._v(\" \"+_vm._s(props.item.key)+\"\\n        \")])]}},{key:\"item.value\",fn:function(props){return [_c('v-edit-dialog',{attrs:{\"return-value\":_vm.value_},on:{\"update:returnValue\":function($event){_vm.value_=$event},\"update:return-value\":function($event){_vm.value_=$event},\"save\":_vm.onSave,\"open\":function($event){return _vm.onEdit(props.item)}},scopedSlots:_vm._u([{key:\"input\",fn:function(){return [_c('v-text-field',{attrs:{\"label\":\"Edit\",\"single-line\":\"\"},model:{value:(_vm.value_),callback:function ($$v) {_vm.value_=$$v},expression:\"value_\"}})]},proxy:true}],null,true)},[_vm._v(\" \"+_vm._s(props.item.value)+\"\\n        \")])]}}],null,false,2433788578),model:{value:(_vm.selected),callback:function ($$v) {_vm.selected=$$v},expression:\"selected\"}}),_c('pre',{staticClass:\"caption\"},[_vm._v(_vm._s(_vm.object))])],1):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div v-if=\"items\">\r\n    <v-data-table :headers=\"headers\" :items=\"items\" dense show-select hide-default-footer :items-per-page=\"Number.POSITIVE_INFINITY\" v-model=\"selected\" style=\"display: inline-grid;\">\r\n      <template v-slot:top>\r\n        <v-row class=\"mx-2 my-0\">\r\n          <v-spacer></v-spacer>\r\n          <v-tooltip top>\r\n            <template v-slot:activator=\"{ on }\">\r\n              <v-btn icon small @click=\"add()\" v-on=\"on\" class=\"primary--text pr-1\">\r\n                <v-icon>mdi-plus</v-icon>\r\n              </v-btn>\r\n            </template>\r\n            <span>Add</span>\r\n          </v-tooltip>\r\n          <v-tooltip top>\r\n            <template v-slot:activator=\"{ on }\">\r\n              <v-btn icon small :disabled=\"selected.length == 0\" @click=\"remove()\" v-on=\"on\" class=\"primary--text pr-1\">\r\n                <v-icon>mdi-trash-can-outline</v-icon>\r\n              </v-btn>\r\n            </template>\r\n            <span>Remove</span>\r\n          </v-tooltip>\r\n        </v-row>\r\n        <v-divider></v-divider>\r\n      </template>\r\n      <template v-slot:item.key=\"props\">\r\n        <v-edit-dialog :return-value.sync=\"key_\" @save=\"onSave(props.item)\" @open=\"onEdit(props.item)\"> {{ props.item.key }}\r\n          <template v-slot:input>\r\n            <v-text-field v-model=\"key_\" :rules=\"[required, unique]\" required label=\"Edit\" single-line></v-text-field>\r\n          </template>\r\n        </v-edit-dialog>\r\n      </template>\r\n      <template v-slot:item.value=\"props\">\r\n        <v-edit-dialog :return-value.sync=\"value_\" @save=\"onSave\" @open=\"onEdit(props.item)\"> {{ props.item.value }}\r\n          <template v-slot:input>\r\n            <v-text-field v-model=\"value_\" label=\"Edit\" single-line></v-text-field>\r\n          </template>\r\n        </v-edit-dialog>\r\n      </template>\r\n    </v-data-table>\r\n    <pre class=\"caption\">{{object}}</pre>\r\n  </div>\r\n</template>\r\n<script>\r\nimport djvueMixin from \"@/mixins/core/djvue.mixin.js\"\r\nimport { extend, toPairs } from \"lodash\"\r\n\r\nexport default {\r\n\r\n  name: \"KeyValueEditor\",\r\n\r\n  props: [\"object\", \"value\"],\r\n\r\n  mixins: [djvueMixin],\r\n\r\n  data() {\r\n    return {\r\n      selected: [],\r\n      editedItem: null,\r\n      headers: [\r\n        { text: \"Key\", value: 'key', class: 'text-xs-left' },\r\n        { text: \"Value\", value: 'value', class: 'text-xs-left' },\r\n      ],\r\n      key_: null,\r\n      value_: null,\r\n      required: v => (!!v && v != \"\") || \"Required\",\r\n      unique: v => this.items.filter(d => d.key != this.editedItem.key && d.key == v).length == 0 || 'Doublicate key!',\r\n      items: null\r\n    }\r\n  },\r\n\r\n  methods: {\r\n\r\n    onEdit(item) {\r\n      this.editedItem = item\r\n      this.key_ = this.editedItem.key\r\n      this.value_ = this.editedItem.value\r\n    },\r\n\r\n    onSave() {\r\n      setTimeout(() => {\r\n\r\n        if (this.unique(this.key_) != true || this.required(this.key_) != true) return\r\n        let updated = extend({}, this.object[this.editedItem.key])\r\n        updated[this.value] = this.value_\r\n        delete this.object[this.editedItem.key]\r\n        this.object[this.key_] = updated\r\n        this.items = toPairs(this.object).map(d => ({ key: d[0], value: d[1][this.value] }))\r\n\r\n      }, 0)\r\n    }\r\n\r\n  },\r\n  created() {\r\n    this.items = toPairs(this.object).map(d => ({ key: d[0], value: ((this.value) ? d[1][this.value] : d[1]) }))\r\n  }\r\n\r\n}\r\n\r\n</script>\r\n","import mod from \"-!../../../../build/vuetify-loader/lib/loader.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../build/jace-loader/src/parser.js??ref--20-3!../../../../build/jace-loader/src/parser.js??ref--18-1!../../../../build/jace-loader/src/parser.js??ref--33-1!./key-value-list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../build/vuetify-loader/lib/loader.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../build/jace-loader/src/parser.js??ref--20-3!../../../../build/jace-loader/src/parser.js??ref--18-1!../../../../build/jace-loader/src/parser.js??ref--33-1!./key-value-list.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./key-value-list.vue?vue&type=template&id=0136e855&\"\nimport script from \"./key-value-list.vue?vue&type=script&lang=js&\"\nexport * from \"./key-value-list.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../build/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VDataTable } from 'vuetify/lib/components/VDataTable';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VEditDialog } from 'vuetify/lib/components/VDataTable';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VTooltip } from 'vuetify/lib/components/VTooltip';\ninstallComponents(component, {VBtn,VDataTable,VDivider,VEditDialog,VIcon,VRow,VSpacer,VTextField,VTooltip})\n","<template>\r\n\r\n  <v-card flat>\r\n    <key-value-editor :object=\"form.metadata\" value=\"value\"></key-value-editor>\r\n    \r\n  </v-card>  \r\n\r\n</template>\r\n\r\n<script>\r\n  import djvueMixin from \"@/mixins/core/djvue.mixin.js\";\r\n  import listenerMixin from \"@/mixins/core/listener.mixin.js\";\r\n  // import moment from \"moment\"\r\n  import keyValueEditor from \"@/components/core/ext/key-value-list.vue\"\r\n  import { findIndex, toPairs } from \"lodash\"\r\n\r\n\r\n  export default  {\r\n      \r\n      mixins:[djvueMixin, listenerMixin],\r\n      props:[\"form\"],\r\n      components:{\r\n        \"key-value-editor\":keyValueEditor\r\n      },\r\n      computed:{\r\n        \r\n      },\r\n\r\n      methods:{\r\n        cancelNewMetadata(){\r\n          \r\n          this.newMetadataKey = null\r\n          this.newMetadataValue = null\r\n          \r\n          this.showNewMetadataDialog = false;\r\n        \r\n        },\r\n\r\n        validate(){\r\n          if(!this.newMetadataKey) return false\r\n          if(findIndex(this.items, m => m.key == this.newMetadataKey)>=0) return false\r\n          return true  \r\n        },\r\n        \r\n        commitNewMetadata(){\r\n          if(this.validate()){\r\n            this.form.metadata[this.newMetadataKey] = {\r\n              value: this.newMetadataValue,\r\n              required:false,\r\n              editable:true\r\n            }\r\n          }\r\n          \r\n          this.newMetadataKey = null\r\n          this.newMetadataValue = null\r\n          \r\n          this.$emit(\"update\",this.form.metadata)\r\n          this.prepare()\r\n          this.showNewMetadataDialog = false;\r\n        },\r\n\r\n        updateMetadata(){\r\n          let updatedMeta = {}\r\n          this.items.forEach(m => {\r\n            updatedMeta[m.key] = JSON.parse(JSON.stringify(m))\r\n            updatedMeta[m.key].key = undefined;\r\n          })\r\n          this.$emit(\"update\",updatedMeta)\r\n        },\r\n\r\n        prepare(){\r\n          if(!this.form) return\r\n          this.items = toPairs(this.form.metadata)\r\n            .map(item => {\r\n              return {\r\n                key:item[0],\r\n                value:item[1].value,\r\n                required:item[1].required,\r\n                editable: item[1].editable\r\n              }\r\n            })\r\n        },\r\n\r\n        onSelect(){\r\n          this.selection = this.items.filter( m => m.selected)\r\n        },\r\n\r\n        deleteMetadata(){\r\n          this.selection.forEach( m => {\r\n            let index = findIndex(this.items, i => m.key == i.key)\r\n            this.items.splice(index,1)\r\n          })\r\n          this.updateMetadata()\r\n        }\r\n\r\n      },\r\n\r\n      watch:{\r\n        form(){\r\n          this.prepare()\r\n        }\r\n      },\r\n\r\n      created(){\r\n        this.prepare()\r\n      },\r\n\r\n      data:() => ({\r\n        newMetadataKey: null,\r\n        newMetadataValue: null,\r\n        showNewMetadataDialog: false,\r\n        items:[],\r\n        selection:[]\r\n      })\r\n\r\n\r\n  }    \r\n\r\n</script>","import mod from \"-!../../../../../build/vuetify-loader/lib/loader.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../build/jace-loader/src/parser.js??ref--20-3!../../../../../build/jace-loader/src/parser.js??ref--18-1!../../../../../build/jace-loader/src/parser.js??ref--33-1!./metadata-tab.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../build/vuetify-loader/lib/loader.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../build/jace-loader/src/parser.js??ref--20-3!../../../../../build/jace-loader/src/parser.js??ref--18-1!../../../../../build/jace-loader/src/parser.js??ref--33-1!./metadata-tab.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./metadata-tab.vue?vue&type=template&id=41a3d34f&\"\nimport script from \"./metadata-tab.vue?vue&type=script&lang=js&\"\nexport * from \"./metadata-tab.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../../build/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\ninstallComponents(component, {VCard})\n"],"sourceRoot":""}