{"version":3,"sources":["webpack:///./src/components/widgets/sse-listener/sse-listener.vue?2f2e","webpack:///./src/components/widgets/sse-listener/sse-listener.vue?0859","webpack:///./src/components/widgets/sse-listener/sse-listener-config.vue?ed52","webpack:///src/components/widgets/sse-listener/sse-listener-config.vue","webpack:///./src/components/widgets/sse-listener/sse-listener-config.vue?5177","webpack:///./src/components/widgets/sse-listener/sse-listener-config.vue","webpack:///src/components/widgets/sse-listener/sse-listener.vue","webpack:///./src/components/widgets/sse-listener/sse-listener.vue?defc","webpack:///./node_modules/vuetify/lib/components/VBadge/VBadge.js","webpack:///./src/components/widgets/sse-listener/sse-listener.vue?c0d6"],"names":["render","_vm","this","_c","_self","class","options","align","attrs","scopedSlots","_u","key","fn","on","noReadMessages","_g","_b","staticClass","_v","_s","icon","title","model","value","callback","$$v","menu","expression","$event","closeMenu","staticStyle","_l","item","index","user","photo","domProps","formatDate","date","name","data","_e","readonly","proxy","newMessage","send","staticRenderFns","props","submit","components","computed","config","id","editorTree","children","editor","component","mixins","messages","channel","subscription","events","dateFormat","methods","d","Date","format","fromNow","$pubsub","then","service","publish","app","unsubscribe","widgetConfig","$dialogManager","showAndWait","width","subscribe","widget","handler","replace","concat","watch","newValue","openMenu","$emit","extend","avatar","Boolean","bordered","color","type","String","default","content","required","dot","label","inline","offsetX","Number","offsetY","overlap","tile","transition","bottom","left","themeClasses","computedYOffset","isRtl","computedXOffset","calcPosition","$vuetify","rtl","computedBottom","computedLeft","right","computedRight","top","computedTop","offset","lang","$attrs","t","setBackgroundColor","style","styles","role","directives","isActive","badge","$createElement","genBadgeContent","origin","mode","slot","VIcon","genBadge","h","genBadgeWrapper","_x","_y","_z","unshift","push","classes","VBadge","VBtn","VCard","VCardActions","VDivider","VImg","VList","VListItem","VListItemAvatar","VListItemContent","VListItemSubtitle","VListItemTitle","VMenu","VSpacer","VTextarea","VToolbar","VToolbarTitle"],"mappings":"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","file":"js/chunk-321e3a22.b0f71430.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../build/vuetify-loader/lib/loader.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../build/jace-loader/src/parser.js??ref--20-3!../../../../build/jace-loader/src/parser.js??ref--33-1!./sse-listener.vue?vue&type=style&index=0&id=5d9a0352&prod&scoped=true&lang=css&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{class:`text-${_vm.options.align} ma-2`},[_c('v-menu',{attrs:{\"close-on-content-click\":false,\"nudge-width\":200,\"offset-x\":\"\",\"z-index\":\"1000\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [_c('v-badge',{attrs:{\"content\":_vm.noReadMessages,\"value\":_vm.noReadMessages,\"color\":\"warning\",\"bordered\":\"\",\"overlap\":\"\"}},[_c('v-btn',_vm._g(_vm._b({staticClass:\"mx-2\",attrs:{\"dark\":\"\",\"small\":\"\",\"color\":\"primary\"}},'v-btn',attrs,false),on),[_c('v-icon',{staticClass:\"pr-2\",attrs:{\"dark\":\"\",\"small\":\"\"}},[_vm._v(\" \"+_vm._s(_vm.options.icon || 'mdi-bell'))]),_c('span',{staticClass:\"font-weight-light\"},[_vm._v(_vm._s(_vm.options.title))])],1)],1)]}}]),model:{value:(_vm.menu),callback:function ($$v) {_vm.menu=$$v},expression:\"menu\"}},[_c('v-card',{attrs:{\"flat\":\"\"}},[_c('v-toolbar',{attrs:{\"color\":\"primary\",\"dark\":\"\",\"dense\":\"\",\"flat\":\"\"}},[_c('v-icon',{staticClass:\"pr-2\"},[_vm._v(\" \"+_vm._s(_vm.options.icon || 'mdi-bell')+\" \")]),_c('v-toolbar-title',[_vm._v(_vm._s(_vm.options.title))]),_c('v-spacer'),_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){return _vm.closeMenu()}}},[_c('v-icon',[_vm._v(\"mdi-close\")])],1)],1),_c('v-list',{staticStyle:{\"overflow\":\"auto\"},attrs:{\"two-line\":\"\",\"dense\":\"\",\"height\":\"300\"}},[_vm._l((_vm.messages),function(item,index){return [(item)?_c('v-list-item',{key:index,on:{\"click\":function($event){}}},[_c('v-list-item-avatar',[_c('v-img',{attrs:{\"src\":item.user.photo}})],1),_c('v-list-item-content',[_c('v-list-item-title',{class:(index < _vm.noReadMessages) ? 'warning--text' : 'font-weight-light',domProps:{\"innerHTML\":_vm._s(_vm.formatDate(item.date) + ' ' + (item.user.name || 'ananymous'))}}),_c('v-list-item-subtitle',{class:(index < _vm.noReadMessages) ? 'caption' : '',domProps:{\"innerHTML\":_vm._s(`${item.data}`)}})],1)],1):_vm._e(),_c('v-divider')]})],2),(!_vm.options.readonly)?_c('v-textarea',{staticClass:\"ma-2\",attrs:{\"outlined\":\"\"},scopedSlots:_vm._u([{key:\"label\",fn:function(){return [_c('div',[_vm._v(\"\\n            Your message...\\n          \")])]},proxy:true}],null,false,2596954467),model:{value:(_vm.newMessage),callback:function ($$v) {_vm.newMessage=$$v},expression:\"newMessage\"}}):_vm._e(),_c('v-card-actions',[_c('v-spacer'),(!_vm.options.readonly)?_c('v-btn',{attrs:{\"color\":\"primary\",\"text\":\"\",\"disabled\":!_vm.newMessage},on:{\"click\":function($event){return _vm.send()}}},[_vm._v(\"Send\")]):_vm._e(),_c('v-btn',{attrs:{\"color\":\"primary\",\"text\":\"\"},on:{\"click\":_vm.closeMenu}},[_vm._v(\"Close\")])],1)],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('config-dialog',{attrs:{\"options\":_vm.props,\"submit\":_vm.submit}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <config-dialog :options=\"props\" :submit=\"submit\"></config-dialog>\r\n</template>\r\n<script>\r\nimport configDialog from \"@/components/dialogs/config/config-dialog.vue\"\r\n\r\n\r\nexport default {\r\n\r\n  name: \"EduEditorConfig\",\r\n\r\n  components: { \"config-dialog\": configDialog },\r\n\r\n  props: [\"options\", \"submit\"],\r\n\r\n  computed: {\r\n    props() {\r\n      return {\r\n        icon: this.options.config.icon,\r\n        title: `edu-editor-widget: ${this.options.config.id} ${this.options.config.name}`,\r\n        config: this.options.config,\r\n        editorTree: this.editorTree\r\n      }\r\n    }\r\n  },\r\n\r\n\r\n  data() {\r\n    return {\r\n      editorTree: [{\r\n        name: \"Configuration\",\r\n        children: [{\r\n            name: 'Widget',\r\n            editor: () => import(\"@/components/dialogs/config/parts/name-editor.vue\")\r\n          },\r\n          {\r\n            name: 'Style',\r\n            editor: () => import(\"@/components/dialogs/config/parts/css-editor.vue\")\r\n          }\r\n          ,\r\n          {\r\n            name: \"Options\",\r\n            editor: () => import(\"@/components/dialogs/config/parts/options-editor.vue\")\r\n          }\r\n        ]\r\n      }],\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n","import mod from \"-!../../../../build/vuetify-loader/lib/loader.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../build/jace-loader/src/parser.js??ref--20-3!../../../../build/jace-loader/src/parser.js??ref--18-1!../../../../build/jace-loader/src/parser.js??ref--33-1!./sse-listener-config.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../build/vuetify-loader/lib/loader.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../build/jace-loader/src/parser.js??ref--20-3!../../../../build/jace-loader/src/parser.js??ref--18-1!../../../../build/jace-loader/src/parser.js??ref--33-1!./sse-listener-config.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./sse-listener-config.vue?vue&type=template&id=8f3f314c&\"\nimport script from \"./sse-listener-config.vue?vue&type=script&lang=js&\"\nexport * from \"./sse-listener-config.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\r\n  <template>\r\n  <div :class=\"`text-${options.align} ma-2`\">\r\n    <v-menu\r\n      v-model=\"menu\"\r\n      :close-on-content-click=\"false\"\r\n      :nudge-width=\"200\"\r\n      offset-x\r\n      z-index=1000\r\n    >\r\n      <template v-slot:activator=\"{ on, attrs }\">\r\n        <v-badge\r\n          :content=\"noReadMessages\"\r\n          :value=\"noReadMessages\"\r\n          color=\"warning\"\r\n          bordered\r\n          overlap\r\n        >\r\n          <v-btn class=\"mx-2\" dark small color=\"primary\" v-bind=\"attrs\"\r\n          v-on=\"on\">\r\n            <v-icon dark small class=\"pr-2\"> {{options.icon || 'mdi-bell'}}</v-icon> \r\n            <span class=\"font-weight-light\">{{options.title}}</span>\r\n          </v-btn>\r\n\r\n       \r\n        </v-badge>\r\n      </template>\r\n\r\n      <v-card flat>\r\n        <v-toolbar\r\n          color=\"primary\"\r\n          dark\r\n          dense\r\n          flat\r\n        >\r\n          <v-icon class=\"pr-2\"> {{options.icon || 'mdi-bell'}} </v-icon>\r\n\r\n          <v-toolbar-title>{{options.title}}</v-toolbar-title>\r\n\r\n          <v-spacer></v-spacer>\r\n\r\n          <v-btn icon @click=\"closeMenu()\">\r\n            <v-icon>mdi-close</v-icon>\r\n          </v-btn>\r\n        \r\n        </v-toolbar> \r\n        <v-list \r\n          two-line\r\n          dense\r\n          height=\"300\"\r\n          style=\"overflow:auto\"\r\n         >\r\n          <template v-for=\"(item, index) in messages\">\r\n            \r\n            <v-list-item\r\n              :key=\"index\"\r\n              @click=\"\"\r\n              v-if =\"item\"\r\n            >\r\n              <v-list-item-avatar>\r\n                <v-img :src=\"item.user.photo\"></v-img>\r\n              </v-list-item-avatar>\r\n\r\n              <v-list-item-content>\r\n                <v-list-item-title :class=\"(index < noReadMessages) ? 'warning--text' : 'font-weight-light'\" v-html=\"formatDate(item.date) + ' ' + (item.user.name || 'ananymous')\"></v-list-item-title>\r\n                <v-list-item-subtitle :class=\"(index < noReadMessages) ? 'caption' : ''\" v-html=\"`${item.data}`\"></v-list-item-subtitle>\r\n\r\n              </v-list-item-content>\r\n\r\n            </v-list-item>\r\n            <v-divider></v-divider>\r\n          </template>\r\n        </v-list>\r\n\r\n        <v-textarea\r\n          v-if=\"!options.readonly\"\r\n          v-model=\"newMessage\"\r\n          outlined\r\n          class=\"ma-2\"\r\n        >\r\n          <template v-slot:label>\r\n            <div>\r\n              Your message...\r\n            </div>\r\n          </template>\r\n        </v-textarea>\r\n\r\n        <v-card-actions>\r\n          <v-spacer></v-spacer>\r\n          <v-btn color=\"primary\" text v-if=\"!options.readonly\" :disabled=\"!newMessage\" @click=\"send()\">Send</v-btn>\r\n          <v-btn color=\"primary\" text @click=\"closeMenu\">Close</v-btn>\r\n        </v-card-actions>\r\n      </v-card>\r\n    </v-menu>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\n\r\n  import djvueMixin from \"@/mixins/core/djvue.mixin.js\";\r\n  import listenerMixin from \"@/mixins/core/listener.mixin.js\";\r\n  import moment from \"moment\";\r\n  import { extend } from \"lodash\";\r\n\r\n  \r\n  import SSEListenerConfig from \"./sse-listener-config.vue\";\r\n\r\n\r\n  const urlRE = /((https?:\\/\\/)([a-zA-Z0-9]+[a-zA-Z0-9_-]*)(:\\d{0,4})?([a-zA-Z0-9_\\-\\/\\%\\=\\{\\}\\?\\+\\&\\.\\:]*))/g;\r\n\r\n  export default  {\r\n    \r\n    name:\"sse-listener-widget\",\r\n\r\n    icon: \"mdi-bell\",\r\n\r\n    mixins:[djvueMixin, listenerMixin],\r\n\r\n    data: () => ({\r\n      messages: [],\r\n      noReadMessages:0,\r\n      newMessage:\"\",\r\n      menu: false,\r\n      channel:null,\r\n      subscription:null,\r\n      \r\n      options:{\r\n        align: \"right\",\r\n        readonly: true,\r\n        channel: null,\r\n        events:[\"message\"],\r\n        title: \"User Activity\",\r\n        dateFormat:null,\r\n        icon:\"mdi-bell\"\r\n      }\r\n\r\n    }),\r\n\r\n    methods:{\r\n\r\n      formatDate(date){\r\n        let d = moment(new Date(date))\r\n        return (this.options.dateFormat)? d.format(this.options.dateFormat) : d.fromNow()\r\n      },\r\n\r\n      openMenu(){\r\n        this.menu = true\r\n        // this.noReadMessages = 0\r\n      },\r\n\r\n      closeMenu(){\r\n        this.menu = false\r\n        this.noReadMessages = 0\r\n      },\r\n\r\n      send(){\r\n        this.$pubsub()\r\n          .then( service => service.publish({\r\n            channel: this.options.channel,\r\n            date: new Date(),\r\n            app: this.app.name,\r\n            user: this.app.user,\r\n            data: this.newMessage\r\n          }))\r\n          .then( () => {\r\n            this.newMessage = \"\"\r\n          })\r\n      },\r\n\r\n\r\n      onUpdate ({data}) {\r\n        if(!data) return\r\n        this.options = extend( this.options, data )\r\n      },\r\n\r\n\r\n\r\n\r\n\r\n    onDelete(){\r\n      this.$pubsub().then(service => service.unsubscribe(this))\r\n    },\r\n\r\n    onReconfigure (widgetConfig) {\r\n     return this.$dialogManager.showAndWait(SSEListenerConfig, {width:\"90%\"},{config:widgetConfig})\r\n    },\r\n\r\n            \r\n\r\n    \r\n    subscribe(channel){\r\n      this.$pubsub()\r\n        .then(service => service.subscribe({\r\n            widget:this,\r\n            channel: channel,\r\n            handler: (data) => {\r\n              if(!this.menu){\r\n                this.noReadMessages++\r\n              }\r\n              data.data = data.data.replace(\"\\n\",\"<br/>\")//.replace(urlRE,'<a target=\"_blank\" href=\"$1\">$1</a>')\r\n              this.messages = [data].concat(this.messages) //.push(data)\r\n            }\r\n          })\r\n        )\r\n        .then( subscription => {\r\n          this.subscription = subscription\r\n        })\r\n    }\r\n  },  \r\n\r\n    watch:{\r\n      menu(newValue){\r\n        if(newValue) this.openMenu()\r\n      },\r\n      \"options.channel\"(newValue){\r\n        if(!newValue) return\r\n        this.subscribe(newValue)\r\n      }\r\n    },\r\n\r\n    \r\n    props:[\"config\"],\r\n    \r\n    mounted(){ this.$emit(\"init\") }\r\n\r\n  }\r\n\r\n</script> \r\n<style scoped>\r\n  .bg-white {\r\n    background: white;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../../build/vuetify-loader/lib/loader.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../build/jace-loader/src/parser.js??ref--20-3!../../../../build/jace-loader/src/parser.js??ref--18-1!../../../../build/jace-loader/src/parser.js??ref--33-1!./sse-listener.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../build/vuetify-loader/lib/loader.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../build/jace-loader/src/parser.js??ref--20-3!../../../../build/jace-loader/src/parser.js??ref--18-1!../../../../build/jace-loader/src/parser.js??ref--33-1!./sse-listener.vue?vue&type=script&lang=js&\"","// Styles\nimport \"../../../src/components/VBadge/VBadge.sass\"; // Components\n\nimport VIcon from '../VIcon/VIcon'; // Mixins\n\nimport Colorable from '../../mixins/colorable';\nimport Themeable from '../../mixins/themeable';\nimport Toggleable from '../../mixins/toggleable';\nimport Transitionable from '../../mixins/transitionable';\nimport { factory as PositionableFactory } from '../../mixins/positionable'; // Utilities\n\nimport mixins from '../../util/mixins';\nimport { convertToUnit, getSlot } from '../../util/helpers';\nexport default mixins(Colorable, PositionableFactory(['left', 'bottom']), Themeable, Toggleable, Transitionable).extend({\n  name: 'v-badge',\n  props: {\n    avatar: Boolean,\n    bordered: Boolean,\n    color: {\n      type: String,\n      default: 'primary'\n    },\n    content: {\n      required: false\n    },\n    dot: Boolean,\n    label: {\n      type: String,\n      default: '$vuetify.badge'\n    },\n    icon: String,\n    inline: Boolean,\n    offsetX: [Number, String],\n    offsetY: [Number, String],\n    overlap: Boolean,\n    tile: Boolean,\n    transition: {\n      type: String,\n      default: 'scale-rotate-transition'\n    },\n    value: {\n      default: true\n    }\n  },\n  computed: {\n    classes() {\n      return {\n        'v-badge--avatar': this.avatar,\n        'v-badge--bordered': this.bordered,\n        'v-badge--bottom': this.bottom,\n        'v-badge--dot': this.dot,\n        'v-badge--icon': this.icon != null,\n        'v-badge--inline': this.inline,\n        'v-badge--left': this.left,\n        'v-badge--overlap': this.overlap,\n        'v-badge--tile': this.tile,\n        ...this.themeClasses\n      };\n    },\n\n    computedBottom() {\n      return this.bottom ? 'auto' : this.computedYOffset;\n    },\n\n    computedLeft() {\n      if (this.isRtl) {\n        return this.left ? this.computedXOffset : 'auto';\n      }\n\n      return this.left ? 'auto' : this.computedXOffset;\n    },\n\n    computedRight() {\n      if (this.isRtl) {\n        return this.left ? 'auto' : this.computedXOffset;\n      }\n\n      return !this.left ? 'auto' : this.computedXOffset;\n    },\n\n    computedTop() {\n      return this.bottom ? this.computedYOffset : 'auto';\n    },\n\n    computedXOffset() {\n      return this.calcPosition(this.offsetX);\n    },\n\n    computedYOffset() {\n      return this.calcPosition(this.offsetY);\n    },\n\n    isRtl() {\n      return this.$vuetify.rtl;\n    },\n\n    // Default fallback if offsetX\n    // or offsetY are undefined.\n    offset() {\n      if (this.overlap) return this.dot ? 8 : 12;\n      return this.dot ? 2 : 4;\n    },\n\n    styles() {\n      if (this.inline) return {};\n      return {\n        bottom: this.computedBottom,\n        left: this.computedLeft,\n        right: this.computedRight,\n        top: this.computedTop\n      };\n    }\n\n  },\n  methods: {\n    calcPosition(offset) {\n      return `calc(100% - ${convertToUnit(offset || this.offset)})`;\n    },\n\n    genBadge() {\n      const lang = this.$vuetify.lang;\n      const label = this.$attrs['aria-label'] || lang.t(this.label);\n      const data = this.setBackgroundColor(this.color, {\n        staticClass: 'v-badge__badge',\n        style: this.styles,\n        attrs: {\n          'aria-atomic': this.$attrs['aria-atomic'] || 'true',\n          'aria-label': label,\n          'aria-live': this.$attrs['aria-live'] || 'polite',\n          title: this.$attrs.title,\n          role: this.$attrs.role || 'status'\n        },\n        directives: [{\n          name: 'show',\n          value: this.isActive\n        }]\n      });\n      const badge = this.$createElement('span', data, [this.genBadgeContent()]);\n      if (!this.transition) return badge;\n      return this.$createElement('transition', {\n        props: {\n          name: this.transition,\n          origin: this.origin,\n          mode: this.mode\n        }\n      }, [badge]);\n    },\n\n    genBadgeContent() {\n      // Dot prop shows no content\n      if (this.dot) return undefined;\n      const slot = getSlot(this, 'badge');\n      if (slot) return slot;\n      if (this.content) return String(this.content);\n      if (this.icon) return this.$createElement(VIcon, this.icon);\n      return undefined;\n    },\n\n    genBadgeWrapper() {\n      return this.$createElement('span', {\n        staticClass: 'v-badge__wrapper'\n      }, [this.genBadge()]);\n    }\n\n  },\n\n  render(h) {\n    const badge = [this.genBadgeWrapper()];\n    const children = [getSlot(this)];\n    const {\n      'aria-atomic': _x,\n      'aria-label': _y,\n      'aria-live': _z,\n      role,\n      title,\n      ...attrs\n    } = this.$attrs;\n    if (this.inline && this.left) children.unshift(badge);else children.push(badge);\n    return h('span', {\n      staticClass: 'v-badge',\n      attrs,\n      class: this.classes\n    }, children);\n  }\n\n});\n//# sourceMappingURL=VBadge.js.map","import { render, staticRenderFns } from \"./sse-listener.vue?vue&type=template&id=5d9a0352&scoped=true&\"\nimport script from \"./sse-listener.vue?vue&type=script&lang=js&\"\nexport * from \"./sse-listener.vue?vue&type=script&lang=js&\"\nimport style0 from \"./sse-listener.vue?vue&type=style&index=0&id=5d9a0352&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5d9a0352\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../build/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBadge } from 'vuetify/lib/components/VBadge';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemAvatar } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemSubtitle } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VMenu } from 'vuetify/lib/components/VMenu';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextarea } from 'vuetify/lib/components/VTextarea';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\nimport { VToolbarTitle } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VBadge,VBtn,VCard,VCardActions,VDivider,VIcon,VImg,VList,VListItem,VListItemAvatar,VListItemContent,VListItemSubtitle,VListItemTitle,VMenu,VSpacer,VTextarea,VToolbar,VToolbarTitle})\n"],"sourceRoot":""}