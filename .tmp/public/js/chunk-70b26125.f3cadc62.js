(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-70b26125","chunk-c2702fe6"],{"36ae":function(t,e,i){"use strict";i("7d82")},"3c5a":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"echart",style:t.style})},a=[],n=i("313e"),o=i("4e14"),r={name:"echart",mixins:[o["a"]],computed:{style(){return{height:(this.height||250)+"px"}}},methods:{initChart(t){this.chart=n["init"](this.$el,null,{height:this.height,width:"auto"}),this.resizeHandler=()=>{this.width=this.$el.clientWidth,this.chart.resize()},window.attachEvent?window.attachEvent("onresize",this.resizeHandler):window.addEventListener("resize",this.resizeHandler),t&&setTimeout(()=>{this.chart.setOption(t),this.chart.on("click",t=>{this.$emit("chart-event",t)})},10),this.on({event:"slide-start",callback:()=>{setTimeout(()=>{this.chart&&this.options&&this.chart.setOption(this.options,!0),this.chart.resize()},10)},rule:()=>!0}),this.on({event:"update-dialog-view",callback:()=>{setTimeout(()=>{this.chart&&this.options&&this.chart.setOption(this.options,!0),this.chart.resize()},10)},rule:()=>!0})}},props:["options","height"],watch:{options:{handler:function(t){t&&this.chart&&setTimeout(()=>{this.chart.setOption(t,!0),this.chart.resize()},10)},deep:!0},height(t){setTimeout(()=>{this.chart.resize({height:t},10)})}},mounted(){this.initChart(this.options)},beforeDestroy(){window.attachEvent?window.detachEvent("onresize",this.resizeHandler):window.removeEventListener("resize",this.resizeHandler,!1),this.off()},data:()=>({chart:null,resizeHandler:null})},l=r,c=(i("36ae"),i("2877")),d=Object(c["a"])(l,s,a,!1,null,"7d96c1a5",null);e["default"]=d.exports},5927:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",[e("v-row",{staticClass:"mx-0 pa-5"},[e("v-col",[e("div",{class:"title font-weight-light "+(1!=t.validation?"warning--text":"primary--text"),staticStyle:{"line-height":"1.2em"}},[t._v(t._s(t.title)+"\n      ")]),e("p",{staticClass:"body-2 py-1 pl-5 pr-2 my-0 font-weight-light",staticStyle:{"line-height":"1.2em"}},[t._v(t._s(t.note))])])],1),e("v-divider"),1!=t.validation?e("v-row",{staticClass:"caption",attrs:{color:"warning"}},[e("v-spacer"),e("div",[e("span",{staticClass:"warning--text caption pa-2 font-weight-light font-italic"},[t._v(t._s(t.validation))])])],1):t._e()],1)},a=[],n=i("4e14"),o={props:["id","title","note","validation"],mixins:[n["a"]],watch:{validation(t){this.emit("layout-change-state",this.id,t)}},created(){this.emit("layout-change-state",this.id,this.validation)}},r=o,l=i("2877"),c=i("fef8"),d=i.n(c),h=i("62ad"),u=i("ce7e"),p=i("0fd9"),v=i("2fa4"),f=Object(l["a"])(r,s,a,!1,null,null,null);e["a"]=f.exports;d()(f,{VCol:h["a"],VDivider:u["a"],VRow:p["a"],VSpacer:v["a"]})},6633:function(t,e,i){"use strict";var s=i("3c5a");e["a"]={components:{echart:s["default"]},methods:{truncate(t,e){return e=e||50,t.toString().length<=e?t.toString():t.toString().length-e>10?t.toString().substring(0,e)+"...":t.toString()},redrawStat(){if(this.statOptions){let t=JSON.parse(JSON.stringify(this.statOptions));this.statOptions=null,setTimeout(()=>{this.statOptions=t},1e3)}}},watch:{active(t){t>0&&(this.emit("form-get-stat"),setTimeout(()=>{this.redrawStat()},10))},stat(){this.statOptions=this.calculateStat(),this.statOptions.redraw=!1}},data:()=>({statOptions:null})}},"7d82":function(t,e,i){},"852a":function(t,e,i){"use strict";var s=i("2ef0");e["a"]={methods:{translate(t){return this.$t(`${this.id}_${t}`)},_initI18n(){if(!this.i18n)return;this.$i18n_id=this.$djvue.randomName();let t={en:Object(s["mapKeys"])(this.i18n.en,(t,e)=>`${this.id}_${e}`),uk:Object(s["mapKeys"])(this.i18n.uk,(t,e)=>`${this.id}_${e}`)};this.$i18n.mergeLocaleMessage("en",t.en),this.$i18n.mergeLocaleMessage("uk",t.uk)},_destroyI18n(){}},created(){this._initI18n()},beforeDestroy(){this._destroyI18n()}}},"904b":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t._self._c;return e("div",[t.options&&t.answer?e("v-card",{attrs:{flat:"",color:"transparent"}},[e("v-container",{attrs:{"pa-2":""}},[t.isValid?e("q-view",{attrs:{id:t.config.id,title:t.options.title,note:t.options.note,validation:t.isValid}}):t._e(),e("v-tabs",{model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[e("v-tab",{key:"response",attrs:{ripple:""}},[t._v(t._s(t.translate("Your_Response")))]),t.options.showResponsesStat?e("v-tab",{key:"statistic",attrs:{ripple:""}},[t._v(t._s(t.translate("Report")))]):t._e(),e("v-tab-item",{key:"response",attrs:{ripple:""}},[!t.options.entities||t.options.entities.length<2?e("v-card",{staticClass:"mt-3",attrs:{flat:"",color:"transparent"}},[e("h3",{staticClass:"headline warning--text font-weight-light"},[t._v(t._s(t.translate("Answer_not_configured")))])]):e("v-card",{staticClass:"mt-3 mx-0 pa-3",attrs:{flat:"",color:"transparent"}},[e("v-data-table",{staticStyle:{border:"1px solid #dedede"},attrs:{headers:t.headers,items:t.items,dense:"","items-per-page":Number.POSITIVE_INFINITY,"hide-default-footer":"","item-key":"id"},scopedSlots:t._u([{key:"body",fn:function({items:i}){return[e("tbody",t._l(i,(function(i,s){return e("tr",{key:s},t._l(t.headers,(function(a,n){return e("td",{key:n,class:0==n?"text-start":"text-center",staticStyle:{"font-size":"12px"}},[0==n||n<=s+1?e("span",{staticClass:"caption text-start",staticStyle:{"line-height":"1.4em"}},[t._v("\n                        "+t._s("null"==i[a.value]?" ":i[a.value])+"\n                      ")]):e("v-menu",{attrs:{"close-on-content-click":""},scopedSlots:t._u([{key:"activator",fn:function({on:s}){return[e("v-chip",t._g({staticClass:"ma-2",style:"min-width:3em; "+t.getStyle(i,a),attrs:{small:"",outlined:""}},s),[t._v("\n                            "+t._s(t.getValue(i,a))+"\n                          ")])]}}],null,!0)},[e("v-list",t._l(t.scale,(function(s,n){return e("v-list-item-title",{key:n,style:s.style+" padding:0.25em 1em;cursor:pointer;",on:{click:function(e){return t.setValue(s.value,i,a)}}},[t._v("\n                            "+t._s(s.value?s.value:"...")+"\n                          ")])})),1)],1)],1)})),0)})),0)]}}])})],1)],1),t.options.showResponsesStat?e("v-tab-item",{key:"statistic",attrs:{ripple:""}},[t.options.entities.length<2?e("v-card",{staticClass:"mt-3",attrs:{flat:"",color:"transparent"}},[e("h3",{staticClass:"headline warning--text font-weight-light"},[t._v(t._s(t.translate("No_data_available")))])]):e("v-card",{staticClass:"mt-3",attrs:{flat:"",color:"transparent"}},[e("v-layout",{attrs:{"fill-height":"",row:""}},[e("v-flex",{staticClass:"text-xs-center headline",staticStyle:{"border-left":"1px solid #dedede","border-bottom":"1px solid #dcdcdc","border-top":"1px solid #dcdcdc"},attrs:{xs2:"","pa-2":""}}),t._l(t.options.entities,(function(i,s){return e("v-flex",{key:s,class:t.cellClass+" text-xs-center",style:`\n                    min-height:3em; \n                    border-left:1px solid #dedede; \n                    border-bottom:1px solid #dcdcdc;  \n                    border-top:1px solid #dcdcdc;\n                    ${s==t.options.entities.length-1?"border-right: 1px solid #dcdcdc !important;":""}\n                  `},[e("span",{staticClass:"caption"},[t._v(t._s(i.title))])])}))],2),t._l(t.options.entities,(function(i,s){return e("v-layout",{key:s,attrs:{"fill-height":"",row:""}},[e("v-flex",{staticClass:"caption",staticStyle:{"border-left":"1px solid #dcdcdc","border-bottom":"1px solid #dcdcdc"},attrs:{xs2:"","pa-2":"","align-center":""}},[t._v("\n                "+t._s(i.title)+"\n              ")]),t._l(t.options.entities,(function(a,n){return e("v-flex",{key:n,class:t.cellClass+" text-xs-center",style:`\n                  min-height:3em; \n                  border-left: 1px solid #dcdcdc;\n                  border-bottom:1px solid #dcdcdc; \n                  ${n<t.options.entities.length-1?"":"border-right: 1px solid #dcdcdc !important;"}\n                `,attrs:{"align-center":""}},[n>s?e("v-layout",{staticStyle:{height:"100%"},attrs:{"align-center":""}},[e("v-flex",{staticClass:"text-xs-center body-2"},[t.getChartOptions(i,a)?e("echart",{attrs:{options:t.getChartOptions(i,a),height:t.height}}):t._e()],1)],1):e("v-layout",{staticStyle:{height:"100%"}})],1)}))],2)}))],2)],1):t._e()],1)],1)],1):e("div",{staticClass:"text-xs-center"})],1)},a=[],n=i("2ef0"),o=i("c555"),r=i("4e14"),l=i("6633"),c=i("852a"),d=i("5927"),h={mixins:[o["a"],r["a"],l["a"],c["a"]],props:["config","options","answer","stat"],components:{"q-view":d["a"]},computed:{cellClass(){let t=Math.trunc(10/this.options.entities.length);return t=t>2?2:t,"xs"+t},isValid(){return this.options?this.answer?!this.options.required||(this.answer.data.length>0||this.translate("Validation_Error")):"No response data":"Not configured"},scale(){let t=JSON.parse(JSON.stringify(this.options.scale));return t.push({value:null,style:this.options.undefinedValue?this.options.undefinedValue.style:`color:${this.$vuetify.theme.secondary} !important;`,title:""}),t}},methods:{onSetValue(t,e,i){this.selection={e1:e,e2:i},t.preventDefault(),this.showMenu=!1,this.posX=t.clientX,this.posY=t.clientY,this.$nextTick(()=>{this.showMenu=!0})},getValue(t,e){if(!this.answer)return"null";let i=Object(n["find"])(this.answer.data,i=>i.e1==t.id&&i.e2==e.id),s=Object(n["isUndefined"])(i)?null:i.value,a=Object(n["find"])(this.scale,t=>t.value==s);a=a||{value:null,title:""};let o=this.options.showValue&&Object(n["isNumber"])(a.value)?a.value.toFixed(0):"";return o+=this.options.showTitle?a.title?this.options.showValue?""==a.title?"":`(${a.title})`:a.title:this.options.showValue?"":a.value:"",o=null==o||"null"==o?"":o,o},getStyle(t,e){let i=Object(n["find"])(this.answer.data,i=>i.e1==t.id&&i.e2==e.id),s=Object(n["isUndefined"])(i)?null:i.value,a=Object(n["find"])(this.options.scale,t=>t.value==s);return a?a.style?a.style:`color:${this.$vuetify.theme.themes.light.accent} !important;`:this.options.undefinedValue?this.options.undefinedValue.style:`color:${this.$vuetify.theme.themes.light.secondary} !important;`},setValue(t,e,i){e[i.value]=t;let s=Object(n["find"])(this.options.entities,t=>t.id==e.id),a=Object(n["find"])(this.options.entities,t=>t.id==i.id),o=Object(n["findIndex"])(this.answer.data,t=>t.e1==s.id&&t.e2==a.id);o>=0?this.answer.data.splice(o,1,{e1:s.id,e2:a.id,value:t}):this.answer.data.push({e1:s.id,e2:a.id,value:t}),this.answer&&this.answer.valid!=this.isValid&&(this.answer.valid=this.isValid),this.$emit("update:answer",this.answer)},getChartOptions(t,e){let i=Object(n["find"])(this.statOptions,i=>i.e1.id==t.id&&i.e2.id==e.id);return i?i.chartOptions:null},calculateStat(){if(!this.options)return{};if(!this.options.entities)return{};let t=this.stat.responses.filter(t=>t),e=[];t.forEach(t=>{e=e.concat(t)});let i=[];return this.options.entities.forEach(t=>{this.options.entities.forEach(s=>{i.push({e1:t,e2:s,values:e.filter(e=>e.e1==t.id&&e.e2==s.id&&e.value&&Object(n["find"])(this.options.scale,t=>t.value==e.value)).map(t=>t.value)})})}),i=i.filter(t=>t.values.length>0),i.forEach(t=>{let e=Object(n["countBy"])(t.values);t.data=this.options.scale.map(t=>({title:t.value,value:e[t.value]?e[t.value]:0}))}),i.forEach(t=>{t.chartOptions={color:[this.$vuetify.theme.themes.light.primary],angleAxis:{type:"category",data:this.options.scale.map(t=>t.value),axisLabel:{margin:2,fontSize:8,fontWeight:"bold",color:this.$vuetify.theme.themes.light.secondary}},radiusAxis:{splitNumber:1,axisLine:{show:!1},axisLabel:{show:!1}},polar:{},series:[{type:"bar",itemStyle:{opacity:.5},data:t.data.map(t=>t.value),coordinateSystem:"polar"}]}}),this.height=150,i}},data:()=>({active:null,height:null,showMenu:!1,selection:null,posX:null,posY:null,headers:[],items:[],i18n:{en:{Your_Response:"Your Response",Report:"Report",Validation_Error:"No response for this question but it is required.",Answer_not_configured:"Structure of answer not configured",No_data_available:"No data available"},uk:{Your_Response:"Ваша відповідь",Report:"Звіт",Validation_Error:"Відсутня відповідь на обов'язкове запитання.",Answer_not_configured:"Структура відповіді не визначена",No_data_available:"Дані відсутні"}}}),watch:{options:{handler(t){t&&(this.headers=[{text:"Entity",value:"$entity"}].concat(this.options.entities.map(t=>(t.value=t.title,t.text=t.title,t))),this.items=this.options.entities.map(t=>{let e=["id","$entity"].concat(this.options.entities.map(t=>t.title)),i=[t.id,t.title].concat(this.options.entities.map(e=>this.getValue(t,e)));return Object(n["zipObject"])(e,i)}))},deep:!0}},mounted(){this.$emit("init")}},u=h,p=i("2877"),v=i("fef8"),f=i.n(v),m=i("b0af"),g=i("cc20"),y=i("a523"),b=i("8fea"),w=i("0e8f"),_=i("a722"),x=i("8860"),O=i("5d23"),S=i("e449"),V=i("71a3"),C=i("c671"),k=i("fe57"),$=Object(p["a"])(u,s,a,!1,null,null,null);e["default"]=$.exports;f()($,{VCard:m["a"],VChip:g["a"],VContainer:y["a"],VDataTable:b["a"],VFlex:w["a"],VLayout:_["a"],VList:x["a"],VListItemTitle:O["c"],VMenu:S["a"],VTab:V["a"],VTabItem:C["a"],VTabs:k["a"]})},a523:function(t,e,i){"use strict";i("20f6"),i("4b85");var s=i("e8f2"),a=i("d9f7");e["a"]=Object(s["a"])("container").extend({name:"v-container",functional:!0,props:{id:String,tag:{type:String,default:"div"},fluid:{type:Boolean,default:!1}},render(t,{props:e,data:i,children:s}){let n;const{attrs:o}=i;return o&&(i.attrs={},n=Object.keys(o).filter(t=>{if("slot"===t)return!1;const e=o[t];return t.startsWith("data-")?(i.attrs[t]=e,!1):e||"string"===typeof e})),e.id&&(i.domProps=i.domProps||{},i.domProps.id=e.id),t(e.tag,Object(a["a"])(i,{staticClass:"container",class:Array({"container--fluid":e.fluid}).concat(n||[])}),s)}})},c671:function(t,e,i){"use strict";var s=i("1e6c");e["a"]=s["a"].extend({name:"v-tab-item",props:{id:String},methods:{genWindowItem(){const t=s["a"].options.methods.genWindowItem.call(this);return t.data.domProps=t.data.domProps||{},t.data.domProps.id=this.id||this.value,t}}})}}]);
//# sourceMappingURL=chunk-70b26125.f3cadc62.js.map