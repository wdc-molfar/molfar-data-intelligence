(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-69bd1e7a"],{3007:function(module,__webpack_exports__,__webpack_require__){"use strict";var _mixins_core_djvue_mixin_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("c555"),_mixins_core_listener_mixin_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("4e14"),lodash__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("2ef0"),lodash__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_2__),_timer_config_vue__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("4a08"),moment__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("c1df"),moment__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_4__);__webpack_exports__["a"]={name:"timer-widget",icon:"mdi-clock-alert",mixins:[_mixins_core_djvue_mixin_js__WEBPACK_IMPORTED_MODULE_0__["a"],_mixins_core_listener_mixin_js__WEBPACK_IMPORTED_MODULE_1__["a"]],props:["config"],data:()=>({model:null,note:"",options:null}),watch:{config:{handler(){console.log("watch",this.config.data.embedded),this.config&&(this.options=this.config.data.embedded)},deep:!0}},methods:{getPropertyValue(v){try{if(/^\{\{.+\}\}$/gi.test(v))return Object(lodash__WEBPACK_IMPORTED_MODULE_2__["get"])(this,v.replace("{{","").replace("}}","").trim());if(/^\$\{.+\}$/gi.test(v)){let f=`(${v.replace("${","").replace(/}$/gim,"")})`;return eval(f)}return v}catch(e){return this.isProductionMode?"":"Cannot getPropertyValue: "+e.toString()}},set(e){this.options=e},start(){this.restart()},restart(){this.interval&&this.stop();let e=this.options.data?this.getPropertyValue(this.options.data.duration):"10 seconds";e=e.split(" ");let t=moment__WEBPACK_IMPORTED_MODULE_4___default.a.duration(e[0],e[1]),i=t.clone(),_=moment__WEBPACK_IMPORTED_MODULE_4___default.a.duration(1,e[1]).asMilliseconds();Number.parseInt(e[0])<5&&(_=Math.round(_/2)),this.model=100*i.asMilliseconds()/t.asMilliseconds(),this.note="Time left "+i.humanize(),this.interval=setInterval(()=>{if(i.subtract(_),this.model=100*i.asMilliseconds()/t.asMilliseconds(),this.note="Time left "+i.humanize(),i.asMilliseconds()<=0){clearInterval(this.interval),this.note="Time is up";let e="timeout";this.emit(e,this)}},_)},stop(){this.interval&&(clearInterval(this.interval),this.interval=null)},onUpdate({data:e},t){t?(t.override&&Object(lodash__WEBPACK_IMPORTED_MODULE_2__["set"])(this,t.override,e),t.extend&&Object(lodash__WEBPACK_IMPORTED_MODULE_2__["set"])(this,t.extend,Object(lodash__WEBPACK_IMPORTED_MODULE_2__["extend"])(Object(lodash__WEBPACK_IMPORTED_MODULE_2__["get"])(this,t.extend),e))):this.options=e;let i=Object(lodash__WEBPACK_IMPORTED_MODULE_2__["extend"])({},this.options);this.options=null,this.$nextTick(()=>{this.options=i})},onReconfigure(e){return this.$dialogManager.showAndWait(_timer_config_vue__WEBPACK_IMPORTED_MODULE_3__["a"],{width:"90%"},{config:e})}},mounted(){this.$emit("init")},created(){}}},"4a08":function(e,t,i){"use strict";var _=function(){var e=this,t=e._self._c;return t("config-dialog",{attrs:{options:e.props,submit:e.submit}})},o=[],n=i("a410"),s={name:"TimerConfig",components:{"config-dialog":n["a"]},props:["options","submit"],computed:{props(){return{icon:this.options.config.icon,title:`edu-editor-widget: ${this.options.config.id} ${this.options.config.name}`,config:this.options.config,editorTree:this.editorTree}}},data(){return{editorTree:[{name:"Configuration",children:[{name:"Widget",editor:()=>i.e("chunk-2d226cca").then(i.bind(null,"e9cc"))},{name:"Style",editor:()=>i.e("chunk-55e9e634").then(i.bind(null,"c59e"))},{name:"Options",editor:()=>Promise.all([i.e("chunk-3d2e32d9"),i.e("chunk-0ad95c16")]).then(i.bind(null,"41f1"))}]}]}}},r=s,a=i("2877"),l=Object(a["a"])(r,_,o,!1,null,null,null);t["a"]=l.exports},"528f":function(e,t,i){"use strict";i.r(t);var _=function(){var e=this,t=e._self._c;return e.options&&e.getPropertyValue?t("div",{class:e.options.decoration?e.getPropertyValue(e.options.decoration.classes):"subtitle-2",style:e.options.decoration?e.getPropertyValue(e.options.decoration.style):""},[t("div",{staticClass:"d-flex align-end"},[t("i",{staticClass:"mdi mdi-clock-alert display-1 primary--text text--lighten-4"}),t("v-spacer"),t("div",{staticStyle:{"line-height":"0.9"}},[e._v(e._s(e.note))])],1),t("v-progress-linear",{staticStyle:{border:"1px solid #eaecef"},attrs:{color:e.options.decoration?e.getPropertyValue(e.options.decoration.color):"primary","background-color":e.options.decoration?e.getPropertyValue(e.options.decoration.backgroundColor):"#ffffff",reverse:!e.options.decoration||e.getPropertyValue(e.options.decoration.reverse),width:"100%",height:e.options.decoration?e.getPropertyValue(e.options.decoration.height):6},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1):e._e()},o=[],n=i("3007"),s=n["a"],r=(i("a855"),i("2877")),a=i("fef8"),l=i.n(a),c=i("8e36"),d=i("2fa4"),u=Object(r["a"])(s,_,o,!1,null,"26e7b2dc",null);t["default"]=u.exports;l()(u,{VProgressLinear:c["a"],VSpacer:d["a"]})},a855:function(e,t,i){"use strict";i("ce9b")},ce9b:function(e,t,i){}}]);
//# sourceMappingURL=chunk-69bd1e7a.7a850fb9.js.map