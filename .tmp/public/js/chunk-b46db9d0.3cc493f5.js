(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b46db9d0"],{7679:function(e,t,i){"use strict";i("c79c");var s=i("e4d3"),a=i("7560"),n=i("80d2"),l=i("afdd"),o=i("326d"),r=i("58df");t["a"]=Object(r["a"])(s["a"],a["a"]).extend({name:"v-edit-dialog",props:{cancelText:{default:"Cancel"},large:Boolean,eager:Boolean,persistent:Boolean,saveText:{default:"Save"},transition:{type:String,default:"slide-x-reverse-transition"}},data(){return{isActive:!1}},watch:{isActive(e){e?(this.$emit("open"),setTimeout(this.focus,50)):this.$emit("close")}},methods:{cancel(){this.isActive=!1,this.$emit("cancel")},focus(){const e=this.$refs.content.querySelector("input");e&&e.focus()},genButton(e,t){return this.$createElement(l["a"],{props:{text:!0,color:"primary",light:!0},on:{click:e}},t)},genActions(){return this.$createElement("div",{class:"v-small-dialog__actions"},[this.genButton(this.cancel,this.cancelText),this.genButton(()=>{this.save(this.returnValue),this.$emit("save")},this.saveText)])},genContent(){return this.$createElement("div",{staticClass:"v-small-dialog__content",on:{keydown:e=>{e.keyCode===n["z"].esc&&this.cancel(),e.keyCode===n["z"].enter&&(this.save(this.returnValue),this.$emit("save"))}},ref:"content"},[this.$slots.input])}},render(e){return e(o["a"],{staticClass:"v-small-dialog",class:this.themeClasses,props:{contentClass:"v-small-dialog__menu-content",transition:this.transition,origin:"top right",right:!0,value:this.isActive,closeOnClick:!this.persistent,closeOnContentClick:!1,eager:this.eager,light:this.light,dark:this.dark},on:{input:e=>this.isActive=e},scopedSlots:{activator:({on:t})=>e("div",{staticClass:"v-small-dialog__activator",on:t},[e("span",{staticClass:"v-small-dialog__activator__content"},this.$slots.default)])}},[this.genContent(),this.large?this.genActions():null])}})},bd2c:function(e,t,i){},c79c:function(e,t,i){},d560:function(e,t,i){"use strict";i("bd2c")},ec26:function(e,t,i){"use strict";var s,a=new Uint8Array(16);function n(){if(!s&&(s="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!s))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return s(a)}var l=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function o(e){return"string"===typeof e&&l.test(e)}for(var r=o,d=[],c=0;c<256;++c)d.push((c+256).toString(16).substr(1));function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=(d[e[t+0]]+d[e[t+1]]+d[e[t+2]]+d[e[t+3]]+"-"+d[e[t+4]]+d[e[t+5]]+"-"+d[e[t+6]]+d[e[t+7]]+"-"+d[e[t+8]]+d[e[t+9]]+"-"+d[e[t+10]]+d[e[t+11]]+d[e[t+12]]+d[e[t+13]]+d[e[t+14]]+d[e[t+15]]).toLowerCase();if(!r(i))throw TypeError("Stringified UUID is invalid");return i}var p=h;function u(e,t,i){e=e||{};var s=e.random||(e.rng||n)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){i=i||0;for(var a=0;a<16;++a)t[i+a]=s[a];return t}return p(s)}t["a"]=u},ecff:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e._self._c;return e.options&&e.options.data?t("div",{class:e.options.decoration?e.getPropertyValue(e.options.decoration.classes):"",style:e.options.decoration?e.getPropertyValue(e.options.decoration.style):"width: 100%"},[t("div",{class:e.selectMode?"elevation-4 d-flex align-start":"d-flex align-start",style:e.selectMode?"position:absolute; background: white; padding:8px; border:1px solid #9e9e9e; border-radius: 4px; z-index:10000;width:100%; margin-left: -12px;":""},[e.getPropertyValue(e.options.data.readonly)?e._e():t("div",{staticClass:"d-flex flex-column pr-1"},[t("v-btn",{staticClass:"mb-3",class:e.needSave?"error white--text mb-3":"primary--text mb-3",attrs:{transition:"slide-x-transition","x-small":"",fab:"",outlined:""},on:{click:function(t){return t.stopPropagation(),e.changeMode()}}},[t("v-icon",[e._v("\n                    "+e._s(e.selectMode?"mdi-keyboard-caps":"mdi-menu")+"\n                ")])],1),t("v-spacer"),e.selectMode&&1==e.getPropertyValue(e.options.data.editable)?t("v-btn",{class:e.needSave?"error white--text mb-3":"primary--text mb-3",attrs:{transition:"slide-x-transition","x-small":"",disabled:!e.needSave,fab:"",outlined:""},on:{click:function(t){return t.stopPropagation(),e.saveTree.apply(null,arguments)}}},[t("v-icon",[e._v("mdi-content-save-outline")])],1):e._e()],1),t("div",{staticClass:"flex",staticStyle:{"border-left":"8px solid #cfd8dc"}},[1==e.getPropertyValue(e.options.data.searchable)?t("v-text-field",{staticClass:"px-2 pb-2",attrs:{label:"Search",flat:"",dense:"",outlined:"","hide-details":"",clearable:"","clear-icon":"mdi-close"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}):e._e(),t("v-treeview",{staticClass:"flex",attrs:{items:e.selectMode?e.tree:e.selectionTree,"item-disabled":"disabled","selection-type":e.selectMode?e.selectionType:null,selectable:e.selectMode,"selected-color":"primary","open-all":"",open:e.openedItems,hoverable:e.selectMode,search:e.search,filter:e.filter},on:{"update:open":function(t){e.openedItems=t},input:e.changeSelection},scopedSlots:e._u([{key:"label",fn:function({item:i}){return[t("div",{staticClass:"d-flex align-center",staticStyle:{"min-height":"20px"},on:{mouseenter:function(t){return e.setActive(i,!0)},mouseleave:function(t){return e.setActive(i,!1)}}},[e.selectMode&&e.getPropertyValue(e.options.data.editable)?e._e():t("div",[i.children?e._e():t("v-icon",{attrs:{mdi:""}},[e._v("\n                                "+e._s(e.getPropertyValue(e.options.decoration)&&e.getPropertyValue(e.options.decoration.leafIcon)?e.getPropertyValue(e.options.decoration.leafIcon):"mdi-circle-small")+"\n                            ")]),e._v("\n                            "+e._s(i.title)+"\n                        ")],1),e.selectMode&&e.getPropertyValue(e.options.data.editable)?t("div",{staticClass:"flex xs10"},[t("v-edit-dialog",{staticClass:"flex xs8",attrs:{large:""},on:{open:()=>{e.startEditItem(i)},save:()=>{e.saveItem(i)},cancel:()=>{e.cancel(i)},close:()=>{e.close(i)}},scopedSlots:e._u([{key:"input",fn:function(){return[t("v-text-field",{staticClass:"mt-2",attrs:{label:"Edit",outlined:"",dense:"",rules:[t=>e.shouldNoDublicates(i,t)]},model:{value:i.title,callback:function(t){e.$set(i,"title",t)},expression:"item.title"}})]},proxy:!0}],null,!0)},[t("div",{class:i.title==(e.getPropertyValue(e.options.data.newItemName)||"new item")?"error--text":""},[e._v("\n                                    "+e._s(i.title)+"\n                                ")])])],1):e._e(),t("v-spacer"),e.selectMode&&e.getPropertyValue(e.options.data.editable)?t("div",{staticClass:"flex d-flex justify-end"},[t("v-btn",{directives:[{name:"show",rawName:"v-show",value:i.active,expression:"item.active"}],staticClass:"flex",attrs:{icon:"","x-small":"",color:"primary",disabled:e.disabledUp(i)},on:{click:function(t){return t.stopPropagation(),e.downNode(i)}}},[t("v-icon",[e._v("mdi-arrow-up")])],1),t("v-btn",{directives:[{name:"show",rawName:"v-show",value:i.active,expression:"item.active"}],staticClass:"flex",attrs:{icon:"","x-small":"",color:"primary",disabled:e.disabledDown(i)},on:{click:function(t){return t.stopPropagation(),e.upNode(i)}}},[t("v-icon",[e._v("mdi-arrow-down")])],1),t("v-btn",{directives:[{name:"show",rawName:"v-show",value:i.active,expression:"item.active"}],staticClass:"flex",attrs:{icon:"","x-small":"",color:"primary",disabled:1!=e.shouldNoDublicates(i,e.getPropertyValue(e.options.data.newItemName)||"new item")},on:{click:function(t){return t.stopPropagation(),e.addSibling(i)}}},[t("v-icon",[e._v("mdi-table-row-plus-after")])],1),t("v-btn",{directives:[{name:"show",rawName:"v-show",value:i.active,expression:"item.active"}],staticClass:"flex",attrs:{icon:"","x-small":"",color:"primary",disabled:1!=e.shouldNoChildDublicates(i,e.getPropertyValue(e.options.data.newItemName)||"new item")},on:{click:function(t){return t.stopPropagation(),e.addChild(i)}}},[t("v-icon",[e._v("mdi-table-column-plus-after")])],1)],1):e._e()],1)]}}],null,!1,1921407939),model:{value:e.selection,callback:function(t){e.selection=t},expression:"selection"}})],1)])]):e._e()},a=[],n=i("2ef0"),l=i("ec26"),o={props:["options","getPropertyValue"],data:()=>({needSave:!1,cancelation:!0,selection:[],openedItems:[],search:null,selectMode:!1,tree:[],selectionTree:[],selectionType:"independent"}),methods:{flat2tree(e,t,i){let s,a=Object(n["find"])(e,e=>e.id==t);return s=a?Object(n["sortBy"])(e.filter(e=>e.name.startsWith(a.name+"/")&&e.path.length==a.path.length+1),e=>e.index):Object(n["sortBy"])(e.filter(e=>1==e.path.length),e=>e.index),s=s.map(e=>_.extend({},e)),s.forEach(t=>{t.children=this.flat2tree(e,t.id),0==t.children.length?delete t.children:(t.children=Object(n["sortBy"])(t.children,e=>e.index),this.getPropertyValue(this.options.data.leafonly)&&(t.disabled=!0))}),s},filterTree(e,t){let i=e.filter(e=>t.includes(e.id)),s=[];return i.forEach(t=>{for(let i=0;i<t.path.length;i++){let a=t.path.slice(0,i+1).join("/"),n=_.find(e,e=>e.name==a);s.push(_.extend({},n))}}),this.flat2tree(Object(n["uniqBy"])(s,e=>e.id))},getParent(e,t){let i=Object(n["find"])(e,e=>e.id==t);if(!i)return;let s=i.name.split("/"),a=s.slice(0,s.length-1).join("/");return Object(n["find"])(e,e=>e.name==a)},getChilds(e,t){let i=_.find(e,e=>e.id==t);return i?Object(n["sortBy"])(e.filter(e=>e.name.startsWith(i.name+"/")&&e.name.split("/").length==i.name.split("/").length+1).filter(e=>e),e=>e.index):[]},getSiblings(e,t){let i=this.getParent(e,t);if(!i)return Object(n["sortBy"])(e.filter(e=>1==e.name.split("/").length),e=>e.index);let s=this.getChilds(e,i.id);return s?Object(n["sortBy"])(s.filter(e=>e),e=>e.index):[]},getTree(e,t){let i=e.filter(e=>e.id==t).concat(this.getChilds(e,t)),s=[];return i.forEach(t=>{s=s.concat(this.getChilds(e,t.id))}),Object(n["uniqBy"])(i.concat(s),e=>e.id)},addNode(e,t){t.index=1/0,e.push(t);let i=this.getSiblings(e,t.id);i.forEach((e,t)=>{e.index=t})},moveupNode(e,t){let i=this.getSiblings(e,t.id),s=Object(n["findIndex"])(i,e=>e.id==t.id);s>0&&([i[s-1],i[s]]=[i[s],i[s-1]]),i.forEach((e,t)=>{e.index=t})},movedownNode(e,t){let i=this.getSiblings(e,t.id),s=Object(n["findIndex"])(i,e=>e.id==t.id);s<i.length-1&&([i[s+1],i[s]]=[i[s],i[s+1]]),i.forEach((e,t)=>{e.index=t})},deleteNode(e,t){let i=this.getTree(e,t).map(e=>e.id);Object(n["remove"])(e,e=>i.includes(e.id))},rebaseTree(e,t,i){let s=this.getTree(e,t.id),a=t.name;s.forEach(e=>{e.name=e.name.replace(a,i)})},normalizeItems(e){if(e&&Object(n["isArray"])(e)){let t=e.map(e=>Object(n["extend"])({},e));return t.forEach(e=>{e.path=e.name.split("/"),e.title=Object(n["last"])(e.path),e.active=!1}),t}return[]},changeSelection(e){this.selectMode,this.$emit("change",this,e)},disabledUp(e){return 0==e.index},disabledDown(e){let t=this.normalizeItems(this.getPropertyValue(this.options.data.items)),i=this.getSiblings(t,e.id).length;return 0==i&&(i=t.filter(e=>1==e.path.length).length),e.index==i-1},upNode(e){this.needSave=!0;let t=this.getPropertyValue(this.options.data.items),i=this.normalizeItems(t);this.movedownNode(i,e),i.forEach(e=>{let i=Object(n["find"])(t,t=>t.id==e.id);i&&(i.index=e.index)}),this.tree=this.flat2tree(i)},downNode(e){this.needSave=!0;let t=this.getPropertyValue(this.options.data.items),i=this.normalizeItems(t);this.moveupNode(i,e),i.forEach(e=>{let i=Object(n["find"])(t,t=>t.id==e.id);i&&(i.index=e.index)}),this.tree=this.flat2tree(i)},addChild(e){this.needSave=!0;let t=this.getPropertyValue(this.options.data.items),i=(Object(n["find"])(t,t=>t.id==e.id),{id:Object(l["a"])(),name:`${e.name}/${this.getPropertyValue(this.options.data.newItemName)||"new item"}`,index:1/0});t.push(i);let s=this.normalizeItems(t);this.tree=this.flat2tree(s),this.openedItems.push(e.id)},addSibling(e){this.needSave=!0;let t=this.getPropertyValue(this.options.data.items),i=1==e.path.length?this.getPropertyValue(this.options.data.newItemName)||"new item":`${e.path.slice(0,e.path.length-1).join("/")}/${this.getPropertyValue(this.options.data.newItemName)||"new item"}`,s={id:Object(l["a"])(),name:i,index:e.index+1e-4};t.push(s);let a=this.normalizeItems(t);this.tree=this.flat2tree(a)},siblingName(e,t){return`${path.slice(0,path.length-1).join("/")}/${t}`},childName(e,t){return`${e.name}/${t}`},shouldNoDublicates(e,t){if(e.title==(this.getPropertyValue(this.options.data.newItemName)||"new item"))return"Enter valid name";let i=this.getPropertyValue(this.options.data.items),s=e.name.split("/"),a=1==s.length?t:`${s.slice(0,s.length-1).join("/")}/${t}`,n=this.getSiblings(i,e.id).filter(e=>e.name==a).filter(t=>t.id!=e.id);return 0==n.length||"Already exists"},shouldNoChildDublicates(e,t){if(e.title==(this.getPropertyValue(this.options.data.newItemName)||"new item"))return"Enter valid name";let i=this.getPropertyValue(this.options.data.items),s=(e.name.split("/"),`${e.name}/${t}`),a=this.getChilds(i,e.id).filter(e=>e.name==s).filter(t=>t.id!=e.id);return 0==a.length||"Already exists"},close(e){this.cancelation&&this.cancel(e),this.cancelation=!0},cancel(e){let t=this.getPropertyValue(this.options.data.items),i=Object(n["find"])(t,t=>t.id==e.id);i.name=this.oldName;let s=this.normalizeItems(t);this.tree=this.flat2tree(s),this.cancelation=!1},changeMode(){if(this.selectMode){let e=this.getPropertyValue(this.options.data.items),t=this.normalizeItems(e);this.selectionTree=this.filterTree(t,this.getPropertyValue(this.options.data.value)||[])}this.selectMode=!this.selectMode},saveTree(){this.needSave=!1,this.$emit("command",this,{command:"save-tree"})},startEditItem(e){this.oldName=e.name},saveItem(e){this.needSave=!0;let t=this.getPropertyValue(this.options.data.items);if(1!=this.shouldNoDublicates(e,e.title))return void setTimeout(()=>{let i=Object(n["find"])(t,t=>t.id==e.id);i.name=this.oldName;let s=this.normalizeItems(t);this.tree=this.flat2tree(s)},20);if(e.title){let i=1==e.path.length?e.title:`${e.path.slice(0,e.path.length-1).join("/")}/${e.title}`,s=Object(n["find"])(t,t=>t.id==e.id);this.rebaseTree(t,s,i)}else this.deleteNode(t,e.id);let i=this.normalizeItems(t);this.tree=this.flat2tree(i),this.cancelation=!1},setActive:(e,t)=>{e.active=t}},computed:{filter(){return(e,t,i)=>e.title.toUpperCase().indexOf(t.toUpperCase())>-1}},created(){let e=this.getPropertyValue(this.options.data.items);if(e&&Object(n["isArray"])(e)){let t=this.normalizeItems(e);this.tree=this.flat2tree(t);let i=this.getPropertyValue(this.options.data.value);i?(this.selection=i,this.selectionTree=this.filterTree(t,i)):this.selectionTree=[]}else this.tree=[],this.selectionTree=[]}},r=o,d=(i("d560"),i("2877")),c=i("fef8"),h=i.n(c),p=i("8336"),u=i("7679"),m=i("132d"),f=i("2fa4"),g=i("8654"),v=i("eb2a"),b=Object(d["a"])(r,s,a,!1,null,null,null);t["default"]=b.exports;h()(b,{VBtn:p["a"],VEditDialog:u["a"],VIcon:m["a"],VSpacer:f["a"],VTextField:g["a"],VTreeview:v["a"]})}}]);
//# sourceMappingURL=chunk-b46db9d0.3cc493f5.js.map