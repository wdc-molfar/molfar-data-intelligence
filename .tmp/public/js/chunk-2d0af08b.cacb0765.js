(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0af08b"],{"0d34":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("v-data-table",{staticStyle:{"max-height":"600px",overflow:"auto"},attrs:{headers:t.headers,items:t.resources,dense:"","show-select":""},scopedSlots:t._u([{key:"top",fn:function(){return[e("v-row",{staticClass:"mx-2 my-0"},[e("v-spacer"),e("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:s}){return[e("v-btn",t._g({staticClass:"primary--text pr-1",attrs:{icon:"",small:""},on:{click:function(e){return t.importResource()}}},s),[e("v-icon",[t._v("mdi-plus")])],1)]}}])},[e("span",[t._v(t._s(t.translate("Create")))])]),e("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:s}){return[e("v-btn",t._g({staticClass:"primary--text pr-1",attrs:{icon:"",small:"",disabled:0==t.selected.length},on:{click:function(e){return t.deleteResources()}}},s),[e("v-icon",[t._v("mdi-trash-can-outline")])],1)]}}])},[e("span",[t._v(t._s(t.translate("Remove")))])])],1),e("v-divider")]},proxy:!0},{key:"item.mime",fn:function(s){return[e("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e("v-avatar",t._g({attrs:{tile:"",small:"",size:"18"}},a),[e("v-img",{attrs:{src:t.extIcon(s.item)}})],1)]}}],null,!0)},[e("div",{staticClass:"justify-center"},[e("div",{staticClass:"caption text-center"},[e("v-avatar",{attrs:{tile:"",small:"",size:"64"}},[e("v-img",{attrs:{src:t.extIcon(s.item)}})],1)],1),e("div",{staticClass:"caption text-center"},[t._v("\n            "+t._s(s.item.mime)+"\n          ")])])])]}},{key:"item.url",fn:function(s){return[e("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e("v-btn",t._g({attrs:{slot:"activator",icon:""},on:{click:function(e){return t.$copyText(s.item.url)}},slot:"activator"},a),[e("v-icon",{attrs:{color:"secondary",small:""}},[t._v("mdi-clipboard-text-outline")])],1)]}}],null,!0)},[e("span",[t._v("Copy url")])]),e("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e("a",t._g({attrs:{href:s.item.url,target:"_blank"}},a),[t._v(t._s(s.item.url))])]}}],null,!0)},[e("span",[t._v("Open url")])])]}}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})},o=[],r=s("c555");const n={default:"default.svg",docx:"docx.svg",flv:"flv.svg",gif:"gif.svg",jpg:"jpg.svg",m4v:"m4v.svg",mov:"mov.svg",mp4:"mp4.svg","ods-17":"ods-17.svg","ods-21":"ods-21.svg",odt:"odt.svg",ott:"ott.svg",pdf:"pdf.svg",png:"png.svg",po:"po.svg",ppt:"ppt.svg",psd:"psd.svg",rtf:"rtf.svg",svg:"svg.svg",txt:"txt.svg",xls:"xls.svg",xlsx:"xlsx.svg"};var l=t=>{let e=t.ext;if(("png"==e||"gif"==e||"icon"==e||"jpg"==e||"bmp"==e)&&t.url)return t.url;let s=e?n[e]:n.default;return s=s||n.default,"modules/ext-icons/"+s};let i={en:{Resources_Manager:"Resources Manager",Upload_by:"Upload by",Close:"Close",CREATE:"Add resource",DELETE:"Remove resource"},uk:{Resources_Manager:"Ресурси",Upload_by:"Користувач",Close:"Закрити",CREATE:"Додати ресурс",DELETE:"Видалити ресурс"}};var c={name:"ResourcesManager",mixins:[r["a"]],data(){return{resources:[],selected:[],loading:!1,i18n:i,headers:null}},methods:{extIcon:l,importResource(){this.selectFile().then(t=>{t&&this.onAddResource(t)}).catch(()=>{})},onAddResource(t){if(!t)return;this.loading=!0;let e=new FormData;e.append("app",this.app.name),e.append("file",t),this.$portal.post("/api/resource/update",e,{headers:{"Content-Type":"multipart/form-data"}}).then(()=>{this.getResources()}).catch(t=>{this.$djvue.warning({type:"error",title:t.response.data.name,text:t.response.data.message}).then(()=>{this.loading=!1})})},getResources(){this.$portal.get("/api/resource").then(t=>{this.resources=t.data,this.loading=!1})},deleteResources(){this.loading=!0,Promise.all(this.selected.map(t=>this.$portal.get("/api/resource/delete/"+t.path))).then(()=>{this.selected=[],this.getResources()})}},created(){this.getResources(),this.headers=[{text:"Mime",value:"mime",class:"text-xs-left"},{text:"URL",value:"url",class:"text-xs-left"},{text:this.translate("Upload_by"),value:"owner",class:"text-xs-left"}]}},u=c,d=s("2877"),p=s("fef8"),v=s.n(p),g=s("8212"),f=s("8336"),m=s("8fea"),h=s("ce7e"),x=s("132d"),_=s("adda"),y=s("0fd9"),R=s("2fa4"),b=s("3a2f"),k=Object(d["a"])(u,a,o,!1,null,null,null);e["default"]=k.exports;v()(k,{VAvatar:g["a"],VBtn:f["a"],VDataTable:m["a"],VDivider:h["a"],VIcon:x["a"],VImg:_["a"],VRow:y["a"],VSpacer:R["a"],VTooltip:b["a"]})}}]);
//# sourceMappingURL=chunk-2d0af08b.cacb0765.js.map