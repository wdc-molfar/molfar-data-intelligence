{"version":3,"sources":["webpack:///./src/components/core/ext/ace-highlight.vue?f48e","webpack:///./src/components/widgets/ds-explorer/ds-explorer.vue?1879","webpack:///./src/components/widgets/ds-explorer/io.mixin.js","webpack:///./src/components/widgets/ds-explorer/ds-explorer-config.vue?b6fd","webpack:///src/components/widgets/ds-explorer/ds-explorer-config.vue","webpack:///./src/components/widgets/ds-explorer/ds-explorer-config.vue?e8fc","webpack:///./src/components/widgets/ds-explorer/ds-explorer-config.vue","webpack:///src/components/widgets/ds-explorer/ds-explorer.vue","webpack:///./src/components/widgets/ds-explorer/ds-explorer.vue?3359","webpack:///./src/components/widgets/ds-explorer/ds-explorer.vue?d7f6","webpack:///./src/components/widgets/ds-explorer/ds-explorer.vue?07f3","webpack:///./src/components/core/ext/ace-highlight.vue?86de","webpack:///src/components/core/ext/ace-highlight.vue","webpack:///./src/components/core/ext/ace-highlight.vue?648e","webpack:///./src/components/core/ext/ace-highlight.vue?f328","webpack:///./node_modules/vuetify/lib/components/VGrid/VContainer.js","webpack:///./node_modules/vuetify/lib/components/VTabs/VTabItem.js"],"names":["render","_vm","this","_c","_self","staticStyle","attrs","config","metadata","concepts","collections","error1","error2","error3","staticClass","_v","_s","message","items","entities","datapoints","model","value","callback","$$v","activeTab","expression","key","loadIndicators","open","active","on","$event","scopedSlots","_u","fn","item","type","name","class","indicatorClass","select","_l","dp","indexDp","selectDatapoint","selectedDp","concept","_e","e","indexE","selectEntity","selectedEntity","selected","topic","definition","units","source","href","args","length","a","indexA","navigate","tab","indicator","datapoint","f","indexF","fieldTypeIcon","entity","reference","collection","attr","format","dpInfo","exportCollection","count","ref","def","sampleTable","headers","rows","Number","POSITIVE_INFINITY","props","rowIndex","col","index","dpsExample","entityInfo","entityTable","dpsEntityExample","staticRenderFns","methods","Promise","resolve","reject","$dps","run","script","then","res","data","file","state","c","getBaseURL","url","p","path","submit","components","computed","icon","options","title","id","editorTree","children","editor","component","getTopicNode","r","n","splice","getOpenPath","concat","mixins","highlight","map","dpsDownloadCollection","window","location","node","split","dpsLoadEntityInfo","catch","dpsLoadDatapointInfo","dpsLoadDatapoints","dpsLoadEntities","dpsLoadSample","sample","dpsLoadEntitySample","entitySample","dpsLoadIndicators","JSON","parse","stringify","console","log","d","$djvue","randomName","dpsLoadConcepts","normalize","widgetConfig","$dialogManager","showAndWait","width","dataset","dimensions","text","align","watch","newValue","loadSample","loadDatapointInfo","loadEntitySample","loadEntityInfo","loadConcepts","loadDatapoints","loadEntities","deep","$emit","VBtn","VCard","VCol","VContainer","VDataTable","VDivider","VIcon","VLayout","VRow","VSpacer","VTab","VTabItem","VTabs","VTreeview","wrap","style","domProps","highlighted","html","ace","require","mode","lang","Mode","theme","error","renderSync","content","importCssString","css","replace","newContent","VFlex","extend","functional","String","tag","default","fluid","Boolean","h","classes","Object","keys","filter","startsWith","Array","genWindowItem","call"],"mappings":"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","file":"js/chunk-006adcfa.001299f1.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../build/vuetify-loader/lib/loader.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../build/jace-loader/src/parser.js??ref--20-3!../../../../build/jace-loader/src/parser.js??ref--33-1!./ace-highlight.vue?vue&type=style&index=0&id=4067c51e&prod&scoped=true&lang=css&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('v-card',{staticStyle:{\"min-height\":\"500px\"},attrs:{\"flat\":\"\",\"color\":\"transparent\"}},[_c('v-divider'),(!_vm.config.metadata.concepts || !_vm.config.metadata.collections || _vm.error1 || _vm.error2 || _vm.error3)?_c('v-row',{staticClass:\"mx-3\"},[_c('h2',{staticClass:\"warning--text font-weight-light headline\"},[_vm._v(_vm._s(_vm.message))])]):(_vm.items && _vm.entities && _vm.datapoints)?_c('v-row',[_c('v-col',{staticClass:\"ml-3 pa-0\",attrs:{\"cols\":\"6\"}},[_c('v-tabs',{model:{value:(_vm.activeTab),callback:function ($$v) {_vm.activeTab=$$v},expression:\"activeTab\"}},[_c('v-tab',{key:\"indicators\",attrs:{\"ripple\":\"\"}},[_vm._v(\"Indicators\")]),_c('v-tab',{key:\"datapoints\",attrs:{\"ripple\":\"\"}},[_vm._v(\"Datapoints\")]),_c('v-tab',{key:\"entities\",attrs:{\"ripple\":\"\"}},[_vm._v(\"Entities\")]),_c('v-tab-item',{key:\"indicators\",attrs:{\"ripple\":\"\"}},[_c('v-treeview',{staticClass:\"pa-2\",attrs:{\"items\":_vm.items,\"item-key\":\"key\",\"load-children\":_vm.loadIndicators,\"open-on-click\":\"\",\"open\":_vm.open,\"active\":_vm.active,\"transition\":\"\",\"item-text\":\"\",\"color\":\"transparent\",\"dense\":\"\"},on:{\"update:open\":function($event){_vm.open=$event},\"update:active\":function($event){_vm.active=$event}},scopedSlots:_vm._u([{key:\"prepend\",fn:function({ item }){return [(item.type == 'topic')?_c('div',{staticClass:\"subheading font-weight-light primary--text\"},[_vm._v(\"\\n                \"+_vm._s(item.name)+\"\\n              \")]):_c('v-layout',{class:_vm.indicatorClass(item),attrs:{\"align-center\":\"\",\"row\":\"\"},on:{\"click\":function($event){return _vm.select(item)}}},[_c('v-icon',{class:_vm.indicatorClass(item)},[_vm._v(\"\\n                  mdi-file-table-outline\\n                \")]),_vm._v(\"\\n                \"+_vm._s(item.name)+\"\\n                \")],1)]}}])})],1),_c('v-tab-item',{key:\"datapoints\"},[(_vm.datapoints)?_c('v-container',_vm._l((_vm.datapoints),function(dp,indexDp){return _c('v-row',{key:indexDp,staticClass:\"pt-2 mx-2\",staticStyle:{\"cursor\":\"pointer\"},on:{\"click\":function($event){return _vm.selectDatapoint(dp)}}},[_c('v-icon',{staticClass:\"subtitle-2 pr-2\",class:(_vm.selectedDp && dp.concept == _vm.selectedDp.concept)?'primary--text':'secondary--text font-weight-light'},[_vm._v(\"\\n                mdi-grid-large\\n              \")]),_c('h3',{staticClass:\"subtitle-2\",class:(_vm.selectedDp && dp.concept == _vm.selectedDp.concept)?'primary--text':'secondary--text font-weight-light'},[_vm._v(\"\\n                \"+_vm._s(dp.name)+\"\\n              \")])],1)}),1):_vm._e()],1),_c('v-tab-item',{key:\"entities\"},[(_vm.entities)?_c('v-container',_vm._l((_vm.entities),function(e,indexE){return _c('v-row',{key:indexE,staticClass:\"pt-2 mx-2\",staticStyle:{\"cursor\":\"pointer\"},attrs:{\"pt-2\":\"\"},on:{\"click\":function($event){return _vm.selectEntity(e)}}},[_c('v-icon',{staticClass:\"subtitle-2 pr-2\",class:(_vm.selectedEntity && e.concept == _vm.selectedEntity.concept)?'primary--text':'secondary--text font-weight-light'},[_vm._v(\"\\n                mdi-ballot-outline\\n              \")]),_c('h3',{staticClass:\"subtitle-2\",class:(_vm.selectedEntity && e.concept == _vm.selectedEntity.concept)?'primary--text':'secondary--text font-weight-light'},[_vm._v(\"\\n                \"+_vm._s(e.name)+\"\\n              \")])],1)}),1):_vm._e()],1)],1)],1),_c('v-divider',{attrs:{\"vertical\":\"\"}}),_c('v-col',{staticClass:\"mx-2 px-0\"},[(_vm.activeTab == 0 && _vm.selected != null)?_c('v-card',{staticClass:\"transparent\",attrs:{\"flat\":\"\"}},[_c('v-container',[_c('v-row',{staticClass:\"py-1 mx-0\"},[_c('v-spacer'),_c('div',[_c('span',{staticClass:\"caption font-weight-light\"},[_vm._v(_vm._s(_vm.selected.topic))])])],1),_c('h2',{staticClass:\"primary--text subheading font-weight-light\"},[_c('v-icon',{staticClass:\"subheading\",attrs:{\"color\":\"primary\"}},[_vm._v(_vm._s((_vm.selected.type==\"measure\")? 'mdi-numeric': 'mdi-calculator'))]),_vm._v(\"\\n            \"+_vm._s(_vm.selected.name)+\" (\"+_vm._s(_vm.selected.concept)+\")\\n          \")],1),_c('v-divider'),_c('p',{staticClass:\"subtitle-2 pr-3 pt-3 mb-0 font-weight-light dj-meta\"},[_c('span',{staticClass:\"font-weight-medium\"},[_vm._v(\"\\n              Type:\\n            \")]),_vm._v(\"\\n            \"+_vm._s(_vm.selected.type)+\"\\n          \")]),_c('p',{staticClass:\"subtitle-2 pr-3 mb-0 font-weight-light dj-meta\"},[_c('span',{staticClass:\"font-weight-medium\"},[_vm._v(\"\\n              Definition:\\n            \")]),_vm._v(\"\\n            \"+_vm._s(_vm.selected.definition)+\"\\n          \")]),_c('p',{staticClass:\"subtitle-2 pr-3 mb-0 font-weight-light dj-meta\"},[_c('span',{staticClass:\"font-weight-medium\"},[_vm._v(\"\\n              Units:\\n            \")]),_vm._v(\"\\n            \"+_vm._s(_vm.selected.units)+\"\\n          \")]),_c('p',{staticClass:\"subtitle-2 pr-3 mb-0 font-weight-light dj-meta\"},[_c('span',{staticClass:\"font-weight-medium\"},[_vm._v(\"\\n              Source:\\n            \")]),_vm._v(\"\\n            \"+_vm._s(_vm.selected.source)+\" \"),_c('a',{attrs:{\"href\":_vm.selected.href}},[_vm._v(_vm._s(_vm.selected.href))])]),(_vm.selected.args && _vm.selected.args.length>0)?_c('div',{staticClass:\"subtitle-2 pr-3 mb-0 font-weight-light dj-meta\"},[_c('span',{staticClass:\"font-weight-medium pb-0\"},[_vm._v(\"\\n              Arguments:\\n            \")]),_vm._l((_vm.selected.args),function(a,indexA){return _c('p',{key:indexA,staticClass:\"mb-0 pl-2\"},[_c('a',{on:{\"click\":function($event){return _vm.navigate({tab:0,indicator:a})}}},[_c('v-icon',{staticClass:\"body-2 primary--text ml-2 mr-1\",staticStyle:{\"border\":\"1px solid\"}},[_vm._v(\"mdi-call-made\")]),_vm._v(\"\\n                \"+_vm._s(a.name)+\"\\n              \")],1)])})],2):_vm._e(),(_vm.selected.datapoints)?_c('div',[_c('h2',{staticClass:\"primary--text subheading font-weight-light\"},[_vm._v(\"\\n              Datapoints\\n            \")]),_c('v-divider'),_vm._l((_vm.selected.datapoints),function(dp,indexDp){return _c('v-layout',{key:indexDp,attrs:{\"column\":\"\",\"pt-2\":\"\"}},[_c('h3',{staticClass:\"primary--text body-2\"},[_c('a',{on:{\"click\":function($event){return _vm.navigate({tab:1,datapoint:dp})}}},[_c('v-icon',{staticClass:\"body-2 primary--text ml-2 mr-1\",staticStyle:{\"border\":\"1px solid\"}},[_vm._v(\"mdi-call-made\")]),_vm._v(\"\\n                  \"+_vm._s(dp.name)+\"\\n                \")],1)]),_vm._l((dp.attr),function(f,indexF){return _c('div',{key:indexF,staticClass:\"subtitle-2 pl-3\"},[_c('span',[_c('span',{staticClass:\"font-weight-medium\"},[_c('v-icon',{staticClass:\"subheading pr-1\"},[_vm._v(_vm._s(_vm.fieldTypeIcon(f.type)))]),_vm._v(\"\\n                    \"+_vm._s(f.name)+\" :\\n                  \")],1),_c('span',{staticClass:\"font-weight-light font-italic\"},[_vm._v(_vm._s(f.type))])]),(f.reference)?_c('span',[_vm._v(\"( ref to\\n                  \"),_c('a',{on:{\"click\":function($event){return _vm.navigate({tab:2,entity:f.reference.collection})}}},[_c('v-icon',{staticClass:\"body-2 primary--text ml-2 mr-1\",staticStyle:{\"border\":\"1px solid\"}},[_vm._v(\"mdi-call-made\")]),_vm._v(\"\\n                    \"+_vm._s(`${f.reference.collection.concept} [ ${f.reference.attr} ]`)+\"\\n                  \")],1),_vm._v(\"\\n                  )\\n                \")]):_vm._e(),(f.type=='time')?_c('span',[_vm._v(_vm._s(`( format: ${f.format} )`))]):_vm._e()])})],2)})],2):_vm._e()],1)],1):_vm._e(),(_vm.activeTab == 1 && _vm.dpInfo != null)?_c('v-card',{staticStyle:{\"background\":\"transparent !important\"},attrs:{\"flat\":\"\"}},[_c('v-container',[_c('v-row',{staticClass:\"py-1\"},[_c('v-spacer'),_c('v-btn',{attrs:{\"text\":\"\",\"small\":\"\",\"color\":\"primary\"},on:{\"click\":function($event){return _vm.exportCollection(_vm.dpInfo)}}},[_vm._v(\"download xlsx\")])],1),_c('h3',{staticClass:\"primary--text subheading font-weight-light\"},[_vm._v(_vm._s(_vm.dpInfo.name)+\" ( \"+_vm._s(_vm.dpInfo.count)+\" items )\")]),_c('v-divider'),_vm._l((_vm.dpInfo.attr),function(f,indexF){return _c('div',{key:indexF,staticClass:\"subtitle-2\"},[_c('span',[_c('span',{staticClass:\"font-weight-medium\"},[_c('v-icon',{staticClass:\"subheading pr-1\"},[_vm._v(_vm._s(_vm.fieldTypeIcon(f.type)))]),_vm._v(\"\\n                \"+_vm._s(f.name)+\" :\\n              \")],1),_c('span',{staticClass:\"font-weight-light font-italic\"},[_vm._v(_vm._s(f.type))])]),(f.ref)?_c('span',[_vm._v(\"( ref to\\n              \"),_c('a',{on:{\"click\":function($event){return _vm.navigate({tab:2,entity:f.ref.collection})}}},[_c('v-icon',{staticClass:\"body-2 primary--text ml-2 mr-1\",staticStyle:{\"border\":\"1px solid\"}},[_vm._v(\"mdi-call-made\")]),_vm._v(\"\\n                \"+_vm._s(`${f.ref.collection.concept} [ ${f.ref.attr} ]`)+\"\\n              \")],1),_vm._v(\"\\n              )\\n            \")]):_vm._e(),(f.type=='time')?_c('span',[_vm._v(_vm._s(`( format: ${f.format} )`))]):_vm._e(),(f.def)?_c('span',[_vm._v(\"( Value of\\n              \"),_c('a',{on:{\"click\":function($event){return _vm.navigate({tab:0,indicator:f.def})}}},[_c('v-icon',{staticClass:\"body-2 primary--text ml-2 mr-1\",staticStyle:{\"border\":\"1px solid\"}},[_vm._v(\"mdi-call-made\")]),_vm._v(\"\\n                \"+_vm._s(`${f.def.name}.`)+\"\\n              \")],1),_vm._v(\"\\n              )\\n            \")]):_vm._e()])}),(_vm.sampleTable)?_c('v-row',{staticClass:\"mt-3 mx-0 px-0\"},[_c('v-col',[_c('h3',{staticClass:\"primary--text subheading font-weight-light\"},[_vm._v(\"Sample\")]),_c('v-divider',{staticClass:\"pb-2\"}),_c('v-data-table',{staticStyle:{\"display\":\"inline-grid\"},attrs:{\"headers\":_vm.sampleTable.headers,\"items\":_vm.sampleTable.rows,\"dense\":\"\",\"calculate-widths\":\"\",\"items-per-page\":Number.POSITIVE_INFINITY,\"hide-default-footer\":\"\"},scopedSlots:_vm._u([{key:\"body\",fn:function(props){return [_c('tbody',_vm._l((props.items),function(item,rowIndex){return _c('tr',{key:rowIndex},_vm._l((_vm.sampleTable.headers),function(col,index){return _c('td',{key:index,staticClass:\"caption\"},[_vm._v(\"\\n                        \"+_vm._s(item[col.value])+\"\\n                      \")])}),0)}),0)]}}],null,false,1976349526)})],1)],1):_vm._e(),(_vm.dpsExample)?_c('v-row',{staticClass:\"mt-3 mx-0 px-0\"},[_c('v-col',[_c('h3',{staticClass:\"primary--text subheading font-weight-light\"},[_vm._v(\"Data Processing Script Example\")]),_c('v-divider',{staticClass:\"pb-2\"}),_c('highlight',{attrs:{\"content\":_vm.dpsExample,\"lang\":\"dps\",\"wrap\":\"\"}})],1)],1):_vm._e()],2)],1):_vm._e(),(_vm.activeTab == 2 && _vm.entityInfo != null)?_c('v-card',{staticStyle:{\"background\":\"transparent !important\"},attrs:{\"flat\":\"\"}},[_c('v-container',[_c('v-row',{staticClass:\"py-1\"},[_c('v-spacer'),_c('v-btn',{attrs:{\"text\":\"\",\"small\":\"\",\"color\":\"primary\"},on:{\"click\":function($event){return _vm.exportCollection(_vm.entityInfo)}}},[_vm._v(\"download xlsx\")])],1),_c('h3',{staticClass:\"primary--text subheading font-weight-light\"},[_vm._v(_vm._s(_vm.entityInfo.name)+\" ( \"+_vm._s(_vm.entityInfo.count)+\" items )\")]),_c('v-divider'),_vm._l((_vm.entityInfo.attr),function(f,indexF){return _c('div',{key:indexF,staticClass:\"subtitle-2\"},[_c('span',[_c('span',{staticClass:\"font-weight-medium\"},[_c('v-icon',{staticClass:\"subheading pr-1\"},[_vm._v(_vm._s(_vm.fieldTypeIcon(f.type)))]),_vm._v(\"\\n                \"+_vm._s(f.name)+\" :\\n              \")],1),_c('span',{staticClass:\"font-weight-light font-italic\"},[_vm._v(_vm._s(f.type))])]),(f.ref)?_c('span',[_vm._v(\"( ref to\\n              \"),_c('a',{on:{\"click\":function($event){return _vm.navigate({tab:2,entity:f.ref.collection})}}},[_c('v-icon',{staticClass:\"body-2 primary--text ml-2 mr-1\",staticStyle:{\"border\":\"1px solid\"}},[_vm._v(\"mdi-call-made\")]),_vm._v(\"\\n                \"+_vm._s(`${f.ref.collection.concept} [ ${f.ref.attr} ]`)+\"\\n              \")],1),_vm._v(\"\\n              )\\n            \")]):_vm._e(),(f.type=='time')?_c('span',[_vm._v(_vm._s(`( format: ${f.format} )`))]):_vm._e(),(f.def)?_c('span',[_vm._v(\"( Value of\\n              \"),_c('a',{on:{\"click\":function($event){return _vm.navigate({tab:0,indicator:f.def})}}},[_c('v-icon',{staticClass:\"body-2 primary--text ml-2 mr-1\",staticStyle:{\"border\":\"1px solid\"}},[_vm._v(\"mdi-call-made\")]),_vm._v(\"\\n                \"+_vm._s(`${f.def.name}.`)+\"\\n              \")],1),_vm._v(\"\\n              )\\n            \")]):_vm._e()])}),(_vm.entityTable)?_c('v-row',{staticClass:\"mt-3 mx-0 px-0\"},[_c('v-col',[_c('h3',{staticClass:\"primary--text subheading font-weight-light\"},[_vm._v(\"Sample\")]),_c('v-divider',{staticClass:\"pb-2\"}),_c('v-data-table',{staticStyle:{\"display\":\"inline-grid\"},attrs:{\"headers\":_vm.entityTable.headers,\"items\":_vm.entityTable.rows,\"dense\":\"\",\"calculate-widths\":\"\",\"items-per-page\":Number.POSITIVE_INFINITY,\"hide-default-footer\":\"\"},scopedSlots:_vm._u([{key:\"body\",fn:function(props){return [_c('tbody',_vm._l((props.items),function(item,rowIndex){return _c('tr',{key:rowIndex},_vm._l((_vm.entityTable.headers),function(col,index){return _c('td',{key:index,staticClass:\"caption\"},[_vm._v(\"\\n                        \"+_vm._s(item[col.value])+\"\\n                      \")])}),0)}),0)]}}],null,false,45569643)})],1)],1):_vm._e(),(_vm.dpsEntityExample)?_c('v-row',{staticClass:\"mt-3 mx-0 px-0\"},[_c('v-col',[_c('h3',{staticClass:\"primary--text subheading font-weight-light\"},[_vm._v(\"Data Processing Script Example\")]),_c('v-divider',{staticClass:\"pb-2\"}),_c('highlight',{attrs:{\"content\":_vm.dpsEntityExample,\"lang\":\"dps\",\"wrap\":\"\"}})],1)],1):_vm._e()],2)],1):_vm._e()],1)],1):_vm._e(),_c('v-divider')],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default {\r\n  methods: {\r\n\r\n    // _run(script){\r\n    // \treturn new Promise( (resolve, reject) => {\r\n    // \t\tthis.$dps.run({script: script})\r\n    // \t\t.then( res => {\r\n    // \t\t\tif(res.type ==\"error\"){\r\n    // \t\t\t\treject(res.data)\r\n    // \t\t\t} else {\r\n    // \t\t\t\tresolve(res.data)\r\n    // \t\t\t}\r\n    // \t\t})\r\n    // \t})\r\n\r\n    // },\r\n\r\n    dpsLoadCollectionSample(concept) {\r\n      return new Promise((resolve, reject) => {\r\n        this.$dps.run({\r\n          script: `\r\n\t\t\t\t\t\r\n\t\t\t\t\tdml.select(from:\"${concept}\", return:\"value\")\r\n\t\t\t\t\tset(\"data\")\r\n\r\n\t\t\t\t\t<?javascript\r\n\t\t\t\t\t    $scope.attr = $scope.data.map( d => Object.keys(d));\r\n\t\t\t\t\t    $scope.field = [];\r\n\t\t\t\t\t    $scope.attr.forEach( a => {\r\n\t\t\t\t\t        $scope.field = _.union($scope.field,a)\r\n\t\t\t\t\t    });\r\n\t\t\t\t\t?>\r\n\t\t\t\t\t\r\n\t\t\t\t\tget(\"data\")\r\n\t\t\t\t\tc.limit()\r\n\t\t\t\t\tc.map(<?\r\n\t\t\t\t\t\td => {\r\n\t\t\t\t\t        let res ={}\r\n\t\t\t\t\t        $scope.field.forEach( f => {\r\n\t\t\t\t\t            res[f] = ( d[f] ) ? d[f] : null\r\n\t\t\t\t\t        })\r\n\t\t\t\t\t        return res\r\n\t\t\t\t\t    }\r\n\t\t\t\t\t?>)\r\n\t\t\t\t\tset(\"data\")\r\n\t\t\t\t\t<?javascript\r\n\t\t\t\t\t    $scope.res = {\r\n\t\t\t\t\t        dataset:{\r\n\t\t\t\t\t            dimensions: Object.keys($scope.data[0]),\r\n\t\t\t\t\t            source: $scope.data\r\n\t\t\t\t\t        }\r\n\t\t\t\t\t    };\r\n\t\t\t\t\t?>\r\n\t\t\t\t\treturn(\"res\")\r\n\t\t\t\t`\r\n        }).then(res => {\r\n          if (res.type == \"error\") {\r\n            reject(res.data)\r\n          } else {\r\n            resolve(res.data)\r\n          }\r\n        })\r\n      })\r\n    },\r\n\r\n    dpsLoadSchema() {\r\n      return new Promise((resolve, reject) => {\r\n        this.$dps.run({\r\n          script: `\r\n\t\t\t\t\tddl.desc(\"dj-data\", return:\"identity\")\r\n\t\t\t\t`\r\n        }).then(res => {\r\n          if (res.type == \"error\") {\r\n            reject(res.data)\r\n          } else {\r\n            resolve(res.data)\r\n          }\r\n        })\r\n      })\r\n    },\r\n\r\n    dpsUploadCollections(file) {\r\n      return new Promise((resolve, reject) => {\r\n        this.$dps.run({\r\n          script: `\r\n\r\n\t\t\t\t\t<?javascript\r\n\t\t\t\t\t    $scope.file = $scope.$file.name;\r\n\t\t\t\t\t?>\r\n\r\n\t\t\t\t\tfile.load({{file}})\r\n\t\t\t\t\tset(\"db\")\r\n\t\t\t\t\tddl.desc()\r\n\t\t\t\t\tset(\"collections\")\r\n\r\n\r\n\t\t\t\t\t<?javascript\r\n\t\t\t\t\t    let m = {\r\n\t\t\t\t\t        \"identity\": \"\",\r\n\t\t\t\t\t        \"schema\": \"dj-data\",\r\n\t\t\t\t\t        \"attributes\": {\r\n\t\t\t\t\t            \"value\": {\r\n\t\t\t\t\t                \"type\": \"json\"\r\n\t\t\t\t\t            }\r\n\t\t\t\t\t        },\r\n\t\t\t\t\t        \"permissions\": {\r\n\t\t\t\t\t            \"create\": {\r\n\t\t\t\t\t                \"role\": [\r\n\t\t\t\t\t                    \"owner\",\r\n\t\t\t\t\t                    \"administrator\"\r\n\t\t\t\t\t                ]\r\n\t\t\t\t\t            },\r\n\t\t\t\t\t            \"alter\": {\r\n\t\t\t\t\t                \"role\": [\r\n\t\t\t\t\t                    \"owner\",\r\n\t\t\t\t\t                    \"administrator\"\r\n\t\t\t\t\t                ]\r\n\t\t\t\t\t            },\r\n\t\t\t\t\t            \"drop\": {\r\n\t\t\t\t\t                \"role\": [\r\n\t\t\t\t\t                    \"owner\",\r\n\t\t\t\t\t                    \"administrator\"\r\n\t\t\t\t\t                ]\r\n\t\t\t\t\t            },\r\n\t\t\t\t\t            \"desc\": {\r\n\t\t\t\t\t                \"role\": [\r\n\t\t\t\t\t                    \"owner\",\r\n\t\t\t\t\t                    \"administrator\"\r\n\t\t\t\t\t                ]\r\n\t\t\t\t\t            },\r\n\t\t\t\t\t            \"select\": {\r\n\t\t\t\t\t                \"role\": [\r\n\t\t\t\t\t                    \"any\",\r\n\t\t\t\t\t                    \"owner\",\r\n\t\t\t\t\t                    \"administrator\"\r\n\t\t\t\t\t                ]\r\n\t\t\t\t\t            },\r\n\t\t\t\t\t            \"insert\": {\r\n\t\t\t\t\t                \"role\": [\r\n\t\t\t\t\t                    \"owner\",\r\n\t\t\t\t\t                    \"administrator\"\r\n\t\t\t\t\t                ]\r\n\t\t\t\t\t            },\r\n\t\t\t\t\t            \"update\": {\r\n\t\t\t\t\t                \"role\": [\r\n\t\t\t\t\t                    \"owner\",\r\n\t\t\t\t\t                    \"administrator\"\r\n\t\t\t\t\t                ]\r\n\t\t\t\t\t            },\r\n\t\t\t\t\t            \"delete\": {\r\n\t\t\t\t\t                \"role\": [\r\n\t\t\t\t\t                    \"owner\",\r\n\t\t\t\t\t                    \"administrator\"\r\n\t\t\t\t\t                ]\r\n\t\t\t\t\t            }\r\n\t\t\t\t\t        },\r\n\t\t\t\t\t    };    \r\n\t\t\t\t\t    \r\n\r\n\t\t\t\t\t    \r\n\t\t\t\t\t    $scope.sheets = Object.keys($scope.db);\r\n\t\t\t\t\t    $scope.collections = $scope.collections.map(c => c.identity)\r\n\r\n\t\t\t\t\t    $scope.toBeDrop = $scope.sheets\r\n\t\t\t\t\t                        .filter( s => _.find($scope.collections, c => c == s))\r\n\r\n\t\t\t\t\t    $scope.toBeCreate = $scope.sheets\r\n\t\t\t\t\t                .map( s => {\r\n\t\t\t\t\t\t                 let res = Object.assign({},m);\r\n\t\t\t\t\t\t                 res.identity = s\r\n\t\t\t\t\t\t                 return res\r\n\t\t\t\t\t                });\r\n\t\t\t\t\t    $scope.values = $scope.sheets.map( s => $scope.db[s].map(v=> ({id:v.id, value:v})));\r\n\t\t\t\t\t    \r\n\t\t\t\t\t    $scope.ddlDropScript = $scope.toBeDrop\r\n\t\t\t\t\t        .map( c => \r\n\t\t\t\t\t            'ddl.drop(model:\"'+c+'\");info(\"'+c+'\")'\r\n\t\t\t\t\t        )\r\n\t\t\t\t\t        .join(\";\")\r\n\t\t\t\t\t    $scope.ddlDropScript = ($scope.ddlDropScript) ? $scope.ddlDropScript : \"ctx('noop')\"\r\n\t\t\t\t\t    \r\n\t\t\t\t\t    $scope.ddlCreateScript = $scope.toBeCreate\r\n\t\t\t\t\t        .map( ( c, index ) => \r\n\t\t\t\t\t            'info({{toBeCreate['+index+'].identity}});ddl.create(model:{{toBeCreate['+index+']}})'\r\n\t\t\t\t\t        )\r\n\t\t\t\t\t        .join(\";\");\r\n\t\t\t\t\t    $scope.ddlCreateScript = ($scope.ddlCreateScript) ? $scope.ddlCreateScript : \"ctx('noop')\"\r\n\t\t\t\t\t    \r\n\t\t\t\t\t    $scope.dmlScript = $scope.sheets\r\n\t\t\t\t\t        .map( ( s, index ) => \r\n\t\t\t\t\t            'info(\"'+s+'\");dml.insertOrUpdate(into:\"'+s+'\", values:{{values['+index+']}});info()'\r\n\t\t\t\t\t        )\r\n\t\t\t\t\t        .join(\";\");\r\n\t\t\t\t\t    \r\n\t\t\t\t\t?>\r\n\t\t\t\t\tinfo(\"Drop collections\")\r\n\t\t\t\t\trun({{ddlDropScript}})\r\n\t\t\t\t\tinfo(\"Create collections\")\r\n\t\t\t\t\trun({{ddlCreateScript}})\r\n\t\t\t\t\tinfo(\"Insert or update values\")\r\n\t\t\t\t\trun({{dmlScript}})\r\n\t\t\t\t\tlog()\r\n\t\t\t\t\t`,\r\n          state: {},\r\n          file: file\r\n        }).then(res => {\r\n          if (res.type == \"error\") {\r\n            reject(res.data)\r\n          } else {\r\n            resolve(res.data)\r\n          }\r\n        })\r\n      })\r\n    },\r\n\r\n    dpsDownloadCollection(c) {\r\n      return new Promise((resolve, reject) => {\r\n        this.$dps.run({\r\n          script: `\r\n\t\t\t\t\t\r\n\t\t\t\t\tdml.select(from:\"${c.concept}\", return:\"value\")\r\n\t\t\t\t\tset(\"data\")\r\n\r\n\t\t\t\t\t<?javascript\r\n\t\t\t\t\t    $scope.attr = $scope.data.map( d => Object.keys(d));\r\n\t\t\t\t\t    $scope.field = [];\r\n\t\t\t\t\t    $scope.attr.forEach( a => {\r\n\t\t\t\t\t        $scope.field = _.union($scope.field,a)\r\n\t\t\t\t\t    });\r\n\t\t\t\t\t    \r\n\t\t\t\t\t    $scope.publisher = d => {\r\n\t\t\t\t\t        let res ={}\r\n\t\t\t\t\t        $scope.field.forEach( f => {\r\n\t\t\t\t\t            res[f] = ( d[f] ) ? d[f] : null\r\n\t\t\t\t\t        })\r\n\t\t\t\t\t        return res\r\n\t\t\t\t\t    }    \r\n\t\t\t\t\t?>\r\n\t\t\t\t\tget(\"data\")\r\n\t\t\t\t\tc.map({{publisher}})\r\n\r\n\r\n\t\t\t\t\texport(\"${c.concept}.xlsx\")\r\n\r\n\t\t\t`\r\n        }).then(res => {\r\n          if (res.type == \"error\") {\r\n            reject(res)\r\n          } else {\r\n            resolve(this.$dps.getBaseURL() + res.data.url)\r\n          }\r\n        })\r\n      })\r\n\r\n    },\r\n\r\n    dpsLoadConcepts(metadata) {\r\n      return new Promise((resolve, reject) => {\r\n        this.$dps.run({\r\n          script: `\r\n\t\t\t\t\tdml.select(from:\"${metadata.concepts}\", return:\"value\")\r\n\t\t\t\t\tc.uniqueBy(\"topic\")\r\n\t\t\t\t\tc.order()\r\n\t\t\t\t\tset(\"topics\")\r\n\r\n\t\t\t\t\t<?javascript\r\n\t\t\t\t\t    $scope.tree = {name:\"topic\",children:[]}\r\n\t\t\t\t\t    \r\n\t\t\t\t\t    $scope.topics.forEach (t => {\r\n\t\t\t\t\t        \r\n\t\t\t\t\t        let path = t.split(\":\")\r\n\t\t\t\t\t        let current = $scope.tree.children\r\n\t\t\t\t\t        \r\n\t\t\t\t\t        path.forEach(( part, index ) => {\r\n\t\t\t\t\t            let f = _.find(current, t => t.name == part)\r\n\t\t\t\t\t            if(!f) {\r\n\t\t\t\t\t                current.push({\r\n\t\t\t\t\t                    name:part, \r\n\t\t\t\t\t                    children: [],\r\n\t\t\t\t\t                    type:\"topic\",\r\n\t\t\t\t\t                    path: (index == path.length-1) ? t : undefined\r\n\t\t\t\t\t                })\r\n\t\t\t\t\t                current = current[current.length-1].children\r\n\t\t\t\t\t            } else {\r\n\t\t\t\t\t                current = f.children\r\n\t\t\t\t\t            }\r\n\t\t\t\t\t        })\r\n\t\t\t\t\t        \r\n\t\t\t\t\t    })\r\n\t\t\t\t\t    \r\n\t\t\t\t\t    $scope.tree = $scope.tree.children\r\n\t\t\t\t\t?>\r\n\r\n\t\t\t\t\treturn (\"tree\")\r\n\t\t\t\t\t`\r\n        }).then(res => {\r\n          if (res.type == \"error\") {\r\n            reject(res.data)\r\n          } else {\r\n            resolve(res.data)\r\n          }\r\n        })\r\n      })\r\n\r\n    },\r\n\r\n    dpsLoadEntityInfo(metadata, e) {\r\n      return new Promise((resolve, reject) => {\r\n        this.$dps.run({\r\n          script: `\r\n\t\t        \t<?javascript\r\n\t\t\t\t    $scope.mapper = d => d.value; \r\n\t\t\t\t?>\r\n\t\t\t\tdml.select(from:\"${e.concept}\", return:\"value\")\r\n\t\t\t\tset(\"data\")\r\n\r\n\t\t\t\tdml.select(from:\"${metadata.collections}\", where:<? d => d.value.concept.startsWith(\"${e.concept}\")  ?>, return:\"value\")\r\n\t\t\t\tset(\"collections\")\r\n\r\n\t\t\t\tdml.select(from:\"${metadata.concepts}\", return:\"value\")\r\n\t\t\t\tset(\"indicators\")\r\n\r\n\t\t\t\t<?javascript\r\n\t\t\t\t    let getCollectionDef = concept => {\r\n\t\t\t\t      let collection = _.find($scope.collections, c => c.concept == concept)\r\n\t\t\t\t      collection.attr = $scope.collections\r\n\t\t\t\t        .filter( c => c.concept.split(\".\").length > 1)\r\n\t\t\t\t        .map( a => {\r\n\t\t\t\t            if( a.ref ) {\r\n\t\t\t\t                let names = a.ref.split(\".\")\r\n\t\t\t\t                // a.names = names\r\n\t\t\t\t                a.ref = {}\r\n\t\t\t\t                a.ref.attr = names[1]\r\n\t\t\t\t                a.ref.collection = {\r\n\t\t\t\t                \tconcept:names[0]\r\n\t\t\t\t                }//getCollectionDef(names[0])\r\n\t\t\t\t            }\r\n\t\t\t\t            if( a.def ){\r\n\t\t\t\t                a.def = _.find($scope.indicators, i => i.concept == a.def.split(\".\")[1])\r\n\t\t\t\t            }\r\n\t\t\t\t            return a\r\n\t\t\t\t        })\r\n\t\t\t\t    // let collection = {\r\n\t\t\t\t    //     concept\r\n\t\t\t\t    // }\r\n\t\t\t\t      return collection\r\n\t\t\t\t    }\r\n\t\t\t\t    $scope.counts = {\r\n\t\t\t\t        total: $scope.data.length \r\n\t\t\t\t    }\r\n\t\t\t\t    Object.keys( $scope.data[0]).forEach( key => {\r\n\t\t\t\t        $scope.counts[key] = _.unique($scope.data, key).length\r\n\t\t\t\t    });\r\n\t\t\t\t    $scope.res = getCollectionDef(\"${e.concept}\")\r\n\t\t\t\t    $scope.res.count = $scope.counts.total\r\n\t\t\t\t    $scope.res.attr = $scope.res.attr.map( a => {\r\n\t\t\t\t        a.count = $scope.counts[a.concept.split(\".\")[1]]\r\n\t\t\t\t        return a\r\n\t\t\t\t    })\r\n\t\t\t\t?>\r\n\t\t\t\treturn (\"res\")\r\n\r\n\r\n\t\t        `\r\n        }).then(res => {\r\n          if (res.type == \"error\") {\r\n            reject(res.data)\r\n          } else {\r\n            resolve(res.data)\r\n          }\r\n        })\r\n      })\r\n\r\n    },\r\n\r\n    dpsLoadDatapointInfo(metadata, dp) {\r\n      // console.log(\"dpsLoadDatapointInfo\", metadata, dp)\r\n      return new Promise((resolve, reject) => {\r\n        this.$dps.run({\r\n          script: `\r\n\t\t\t\t\r\n\t\t\t\tdml.select(from:\"${dp.concept}\", return:\"value\")\r\n\t\t\t\tset(\"data\")\r\n\r\n\t\t\t\tdml.select(from:\"${metadata.collections}\",  where:<? d => d.value.concept.startsWith(\"${dp.concept}\")  ?>, return:\"value\")\r\n\t\t\t\tset(\"collections\")\r\n\r\n\t\t\t\tdml.select(from:\"${metadata.concepts}\", return:\"value\")\r\n\t\t\t\tset(\"indicators\")\r\n\r\n\t\t\t\t<?javascript\r\n\t\t\t\t    let getCollectionDef = concept => {\r\n\t\t\t\t      let collection = $scope.collections.filter( c => c.concept == concept)[0]\r\n\t\t\t\t      collection.attr = $scope.collections\r\n\t\t\t\t        .filter( c => c.concept.split(\".\").length>1 && c.concept.split(\".\")[0] == concept)\r\n\t\t\t\t        .map( a => {\r\n\t\t\t\t            if( a.ref ) {\r\n\t\t\t\t                let names = a.ref.split(\".\")\r\n\t\t\t\t                a.ref = {}\r\n\t\t\t\t                a.ref.attr = names[1]\r\n\t\t\t\t                a.ref.collection = {\r\n\t\t\t\t                \tconcept:names[0]\r\n\t\t\t\t                }//getCollectionDef(names[0])\r\n\t\t\t\t            }\r\n\t\t\t\t            if( a.def ){\r\n\t\t\t\t                a.def = _.find($scope.indicators, i => i.concept == a.def.split(\".\")[1])\r\n\t\t\t\t            }\r\n\t\t\t\t            return a\r\n\t\t\t\t        })\r\n\t\t\t\t    \r\n\t\t\t\t      return collection\r\n\t\t\t\t    }\r\n\t\t\t\t    $scope.counts = {\r\n\t\t\t\t        total: $scope.data.length \r\n\t\t\t\t    }\r\n\t\t\t\t    Object.keys( $scope.data[0]).forEach( key => {\r\n\t\t\t\t        $scope.counts[key] = _.unique($scope.data, key).length\r\n\t\t\t\t    });\r\n\t\t\t\t    $scope.res = getCollectionDef(\"${dp.concept}\")\r\n\t\t\t\t    $scope.res.count = $scope.counts.total\r\n\t\t\t\t    $scope.res.attr = $scope.res.attr.map( a => {\r\n\t\t\t\t        a.count = $scope.counts[a.concept.split(\".\")[1]]\r\n\t\t\t\t        return a\r\n\t\t\t\t    })\r\n\t\t\t\t?>\r\n\t\t\t\treturn (\"res\")\r\n        `\r\n        }).then(res => {\r\n\r\n          if (res.type == \"error\") {\r\n            reject(res.data)\r\n          } else {\r\n            resolve(res.data)\r\n          }\r\n        })\r\n      })\r\n\r\n    },\r\n\r\n    dpsLoadDatapoints(metadata) {\r\n      return new Promise((resolve, reject) => {\r\n        this.$dps.run({\r\n          script: `\r\n\t\t\t\tdml.select(from:\"${metadata.collections}\", where:<? d => d.value.type == \"datapoint\" ?>, return:\"value\")\r\n        `\r\n        }).then(res => {\r\n          if (res.type == \"error\") {\r\n            reject(res.data)\r\n          } else {\r\n            resolve(res.data)\r\n          }\r\n        })\r\n      })\r\n    },\r\n\r\n    dpsLoadEntities(metadata) {\r\n      return new Promise((resolve, reject) => {\r\n        this.$dps.run({\r\n          script: `\r\n\t\t\t\tdml.select(\r\n\t\t\t\t    from:\"${metadata.collections}\", \r\n\t\t\t\t    where: <? d => d.value.type == \"entity\" ?>, \r\n\t\t\t\t    return: \"value\"\r\n\t\t\t\t)\r\n\r\n        `\r\n        }).then(res => {\r\n          if (res.type == \"error\") {\r\n            reject(res.data)\r\n          } else {\r\n            resolve(res.data)\r\n          }\r\n        })\r\n\r\n      })\r\n    },\r\n\r\n    dpsLoadSample(metadata, dp) {\r\n      return new Promise((resolve, reject) => {\r\n        this.$dps.run({\r\n          script: `\r\n          \t\tdml.select(\r\n\t\t\t\t    from:\"${metadata.collections}\", \r\n\t\t\t\t    where:<? d => d.value.concept.startsWith(\"${dp.concept}.\") && d.value.concept.split(\".\").length > 1 ?>, \r\n\t\t\t\t    return:<? d => d.value.concept.split(\".\")[1]?>\r\n\t\t\t\t)\r\n\t\t\t\tset(\"header\")\r\n\r\n          \t\tdml.select(from:\"${dp.concept}\", return:\"value\")\r\n\t\t\t\tc.limit()\r\n\t\t\t\tset(\"data\")\r\n\t\t\t\t<?javascript\r\n\t\t\t\t    $scope.res = {\r\n\t\t\t\t        dataset:{\r\n\t\t\t\t            dimensions: $scope.header,\r\n\t\t\t\t            source: $scope.data\r\n\t\t\t\t        }\r\n\t\t\t\t    };\r\n\t\t\t\t?>\r\n\t\t\t\treturn(\"res\")\r\n        `\r\n        }).then(res => {\r\n          if (res.type == \"error\") {\r\n            reject(res.data)\r\n          } else {\r\n            resolve(res.data)\r\n          }\r\n        })\r\n\r\n      })\r\n    },\r\n\r\n    dpsLoadEntitySample(metadata, e) {\r\n      return new Promise((resolve, reject) => {\r\n        this.$dps.run({\r\n          script: `\r\n          \tdml.select(\r\n\t\t\t    from:\"${metadata.collections}\", \r\n\t\t\t    where:<? d => d.value.concept.startsWith(\"${e.concept}.\") && d.value.concept.split(\".\").length > 1 ?>, \r\n\t\t\t    return:<? d => d.value.concept.split(\".\")[1]?>\r\n\t\t\t)\r\n\t\t\tset(\"header\")\r\n\r\n\t\t\tdml.select(from:\"${e.concept}\", return:\"value\")\r\n\t\t\tc.limit()\r\n\t\t\tset(\"data\")\r\n\t\t\t<?javascript\r\n\t\t\t    $scope.res = {\r\n\t\t\t        dataset:{\r\n\t\t\t            dimensions: $scope.header,\r\n\t\t\t            source: $scope.data\r\n\t\t\t        }\r\n\t\t\t    };\r\n\t\t\t?>\r\n\t\t\treturn(\"res\")\r\n          `\r\n        }).then(res => {\r\n          if (res.type == \"error\") {\r\n            reject(res.data)\r\n          } else {\r\n            resolve(res.data)\r\n          }\r\n        })\r\n\r\n      })\r\n    },\r\n\r\n    dpsLoadIndicators(metadata, p) {\r\n\r\n      return new Promise((resolve, reject) => {\r\n        this.$dps.run({\r\n          script: `\r\n\t\t\t\t<?javascript\r\n\t\t\t\t    \r\n\t\t\t\t    $scope.mapper = d => {\r\n\t\t\t\t        let res = {}\r\n\t\t\t\t        res.id = d.id\r\n\t\t\t\t        res.concept = d.value.concept\r\n\t\t\t\t        res.name = d.value.name\r\n\t\t\t\t        res.topic = d.value.topic\r\n\t\t\t\t        res.definition = d.value.definition\r\n\t\t\t\t        res.units = d.value.units\r\n\t\t\t\t        res.args = (d.value.args) ? d.value.args.split(\",\").map(d => d.trim()) : []\r\n\t\t\t\t        res.source = d.value.source\r\n\t\t\t\t        res.href = d.value.href\r\n\t\t\t\t        res.type = d.value.type\r\n\t\t\t\t        return res\r\n\t\t\t\t    };\r\n\t\t\t\t   \r\n\t\t\t\t?>  \r\n\r\n\t\t\t\tdml.select(from:\"${metadata.concepts}\", where:<? d => d.value.topic == \"${p.path}\" ?>, map:{{mapper}})\r\n\t\t\t\tset(\"indicators\")\r\n\t\t\t\tdml.select(from:\"${metadata.concepts}\", map:{{mapper}})\r\n\t\t\t\tset(\"allIndicators\")\r\n\t\t\t\t\r\n\t\t\t\tdml.select(from:\"${metadata.collections}\", \r\n\t\t\t\t\tmap:\r\n\t\t\t\t\t<?\r\n\t\t\t\t\t\titem => {\r\n\t\t\t\t\t        let res = item.value\r\n\t\t\t\t\t        res.id = item.id\r\n\t\t\t\t\t        return res\r\n\t\t\t\t\t    }\r\n\t\t\t\t\t?>\r\n\t\t\t\t)\r\n\t\t\t\t\r\n\t\t\t\tset(\"cDef\")\r\n\r\n\t\t\t\t<?javascript\r\n\r\n\t\t\t\t    let getCollectionDef = concept => {\r\n\t\t\t\t      let collection = _.find( $scope.cDef, c => c.concept == concept)\r\n\t\t\t\t      collection.attr = $scope.cDef\r\n\t\t\t\t        .filter( c => c.concept.split(\".\").length>1 && c.concept.split(\".\")[0] == concept)\r\n\t\t\t\t        .map( a => {\r\n\t\t\t\t            if( a.ref ) {\r\n\t\t\t\t                let names = a.ref.split(\".\")\r\n\t\t\t\t                a.reference = {}\r\n\t\t\t\t                a.reference.attr = names[1]\r\n\t\t\t\t                a.reference.collection = { concept:names[0] } //getCollectionDef(names[0])\r\n\t\t\t\t            }\r\n\t\t\t\t            return a\r\n\t\t\t\t        })\r\n\t\t\t\t    \r\n\t\t\t\t      return collection\r\n\t\t\t\t    }\r\n\r\n\r\n\t\t\t\t    $scope.res = $scope.indicators.map( ind => {\r\n\t\t\t\t        let res = JSON.parse(JSON.stringify(ind))\r\n\t\t\t\t        res.datapoints = $scope.cDef\r\n\t\t\t\t            .filter( c => c.def && c.def.split(\".\")[1] == ind.concept )\r\n\t\t\t\t            .map( c => getCollectionDef(c.concept.split(\".\")[0]))\r\n\t\t\t\t        let args = res.args || []\r\n\t\t\t\t        args = args.map( c => {\r\n\t\t\t\t           let f = _.find($scope.allIndicators, d => d.concept == c)\r\n\t\t\t\t           if(f) return {\r\n\t\t\t\t                name: f.name,\r\n\t\t\t\t                concept: f.concept,\r\n\t\t\t\t                topic: f.topic\r\n\t\t\t\t            }\r\n\t\t\t\t            return null\r\n\t\t\t\t       })    \r\n\t\t\t\t        \r\n\t\t\t\t        res.args = args.filter(d => d)\r\n\t\t\t\t            \r\n\t\t\t\t        return res    \r\n\t\t\t\t    })\r\n\t\t\t\t?>\r\n\r\n\t\t\t\treturn(\"res\")\r\n\t\t\t`\r\n        }).then(res => {\r\n          if (res.type == \"error\") {\r\n            reject(res.data)\r\n          } else {\r\n            resolve(res.data)\r\n          }\r\n        })\r\n\r\n      })\r\n    }\r\n\r\n  }\r\n}\r\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('config-dialog',{attrs:{\"options\":_vm.props,\"submit\":_vm.submit}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <config-dialog \r\n      :options=\"props\"\r\n      :submit=\"submit\"\r\n    ></config-dialog>  \r\n </template> \r\n\r\n\r\n\r\n\r\n<script>\r\n\r\nimport configDialog from \"@/components/dialogs/config/config-dialog.vue\"\r\n\r\n\r\nexport default {\r\n  \r\n  name: \"DataExplorerConfig\",\r\n  \r\n  components:{ \"config-dialog\": configDialog},\r\n\r\n  props:[\"options\", \"submit\"],\r\n\r\n  computed:{\r\n    props(){\r\n      return {\r\n        icon: this.options.config.icon,\r\n        title: `data-explorer-widget: ${this.options.config.id} ${this.options.config.name}`,\r\n        config: this.options.config,\r\n        editorTree: this.editorTree\r\n      }\r\n    }\r\n  },\r\n\r\n  \r\n  data () {\r\n      return {\r\n        editorTree:[\r\n          {\r\n            name: \"Configuration\",\r\n            children: [\r\n              {\r\n                name: 'Widget',\r\n                editor:() => import(\"@/components/dialogs/config/parts/name-editor.vue\")\r\n              },\r\n              {\r\n                name: \"Metadata\",\r\n                editor:() => import(\"./parts/dataset-metadata-settings.vue\")\r\n              },\r\n              {\r\n                name: \"Data management\",\r\n                editor:() => import(\"../ds-share/dataset-management.vue\")\r\n              },\r\n            ]\r\n          }\r\n        ],\r\n      }\r\n    }\r\n}\r\n\r\n</script>","import mod from \"-!../../../../build/vuetify-loader/lib/loader.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../build/jace-loader/src/parser.js??ref--20-3!../../../../build/jace-loader/src/parser.js??ref--18-1!../../../../build/jace-loader/src/parser.js??ref--33-1!./ds-explorer-config.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../build/vuetify-loader/lib/loader.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../build/jace-loader/src/parser.js??ref--20-3!../../../../build/jace-loader/src/parser.js??ref--18-1!../../../../build/jace-loader/src/parser.js??ref--33-1!./ds-explorer-config.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ds-explorer-config.vue?vue&type=template&id=79cb7205&\"\nimport script from \"./ds-explorer-config.vue?vue&type=script&lang=js&\"\nexport * from \"./ds-explorer-config.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <v-card flat color=\"transparent\" style=\"min-height: 500px;\">\r\n    <v-divider></v-divider>\r\n    <v-row class=\"mx-3\" v-if=\"!config.metadata.concepts || !config.metadata.collections || error1 || error2 || error3\">\r\n      <h2 class=\"warning--text font-weight-light headline\">{{message}}</h2>\r\n    </v-row>\r\n    <v-row v-else-if=\"items && entities && datapoints\">\r\n      <v-col cols=\"6\" class=\"ml-3 pa-0\">\r\n        <v-tabs v-model=\"activeTab\">\r\n          <v-tab key=\"indicators\" ripple>Indicators</v-tab>\r\n          <v-tab key=\"datapoints\" ripple>Datapoints</v-tab>\r\n          <v-tab key=\"entities\" ripple>Entities</v-tab>\r\n          <v-tab-item key=\"indicators\" ripple>\r\n            <v-treeview class=\"pa-2\" :items=\"items\" item-key=\"key\" :load-children=\"loadIndicators\" open-on-click :open.sync=\"open\" :active.sync=\"active\" transition item-text=\"\" color=\"transparent\" dense>\r\n              <template slot=\"prepend\" slot-scope=\"{ item }\">\r\n                <div v-if=\"item.type == 'topic'\" class=\"subheading font-weight-light primary--text\">\r\n                  {{item.name}}\r\n                </div>\r\n                <v-layout align-center row v-else :class=\"indicatorClass(item)\" @click=\"select(item)\">\r\n                  <v-icon :class=\"indicatorClass(item)\">\r\n                    mdi-file-table-outline\r\n                  </v-icon>\r\n                  <!-- <div style=\"line-height: 1.2em; padding: 0.5em 0 0.5em 0.5em;\"> -->\r\n                  {{item.name}}\r\n                  <!-- </div> -->\r\n                </v-layout>\r\n              </template>\r\n            </v-treeview>\r\n          </v-tab-item>\r\n          <v-tab-item key=\"datapoints\">\r\n            <v-container v-if=\"datapoints\">\r\n              <v-row  v-for=\"(dp, indexDp) in datapoints\" :key=\"indexDp\" class=\"pt-2 mx-2\" @click=\"selectDatapoint(dp)\" style=\"cursor:pointer;\">\r\n                <v-icon :class=\"(selectedDp && dp.concept == selectedDp.concept)?'primary--text':'secondary--text font-weight-light'\" class=\"subtitle-2  pr-2\">\r\n                  mdi-grid-large\r\n                </v-icon>\r\n                <h3 :class=\"(selectedDp && dp.concept == selectedDp.concept)?'primary--text':'secondary--text font-weight-light'\" class=\"subtitle-2\">\r\n                  {{dp.name}}\r\n                </h3>\r\n              </v-row>\r\n            </v-container>\r\n          </v-tab-item>\r\n          <v-tab-item key=\"entities\">\r\n            <v-container v-if=\"entities\">\r\n              <v-row v-for=\"(e, indexE) in entities\" :key=\"indexE\" pt-2 @click=\"selectEntity(e)\" class=\"pt-2 mx-2\" style=\"cursor:pointer;\">\r\n                <v-icon :class=\"(selectedEntity && e.concept == selectedEntity.concept)?'primary--text':'secondary--text font-weight-light'\" class=\"subtitle-2 pr-2\">\r\n                  mdi-ballot-outline\r\n                </v-icon>\r\n                <h3 :class=\"(selectedEntity && e.concept == selectedEntity.concept)?'primary--text':'secondary--text font-weight-light'\" class=\"subtitle-2\">\r\n                  {{e.name}}\r\n                </h3>\r\n              </v-row>\r\n            </v-container>\r\n          </v-tab-item>\r\n        </v-tabs>\r\n      </v-col>\r\n      <v-divider vertical></v-divider>\r\n      <v-col class=\"mx-2 px-0\">\r\n        <v-card flat class=\"transparent\" v-if=\"activeTab == 0 && selected != null\">\r\n          <v-container>\r\n            <v-row class=\"py-1 mx-0\">\r\n              <v-spacer></v-spacer>\r\n              <div>\r\n                <span class=\"caption font-weight-light\">{{selected.topic}}</span>\r\n              </div>\r\n            </v-row>\r\n            <h2 class=\"primary--text subheading font-weight-light\">\r\n              <v-icon color=\"primary\" class=\"subheading\">{{(selected.type==\"measure\")? 'mdi-numeric': 'mdi-calculator'}}</v-icon>\r\n              {{selected.name}} ({{selected.concept}})\r\n            </h2>\r\n            <v-divider></v-divider>\r\n            <p class=\"subtitle-2 pr-3 pt-3 mb-0 font-weight-light dj-meta\">\r\n              <span class=\"font-weight-medium\">\r\n                Type:\r\n              </span>\r\n              {{selected.type}}\r\n            </p>\r\n            <p class=\"subtitle-2 pr-3 mb-0 font-weight-light dj-meta\">\r\n              <span class=\"font-weight-medium\">\r\n                Definition:\r\n              </span>\r\n              {{selected.definition}}\r\n            </p>\r\n            <p class=\"subtitle-2 pr-3 mb-0 font-weight-light dj-meta\">\r\n              <span class=\"font-weight-medium\">\r\n                Units:\r\n              </span>\r\n              {{selected.units}}\r\n            </p>\r\n            <p class=\"subtitle-2 pr-3 mb-0 font-weight-light dj-meta\">\r\n              <span class=\"font-weight-medium\">\r\n                Source:\r\n              </span>\r\n              {{selected.source}} <a :href=\"selected.href\">{{selected.href}}</a>\r\n            </p>\r\n            <div class=\"subtitle-2 pr-3 mb-0 font-weight-light dj-meta\" v-if=\"selected.args && selected.args.length>0\">\r\n              <span class=\"font-weight-medium pb-0\">\r\n                Arguments:\r\n              </span>\r\n              <p v-for=\"(a, indexA) in selected.args\" :key=\"indexA\" class=\"mb-0 pl-2\">\r\n                <a @click=\"navigate({tab:0,indicator:a})\">\r\n                  <v-icon style=\"border:1px solid\" class=\"body-2 primary--text ml-2 mr-1\">mdi-call-made</v-icon>\r\n                  {{a.name}}\r\n                </a>\r\n              </p>\r\n            </div>\r\n            <div v-if=\"selected.datapoints\">\r\n              <h2 class=\"primary--text subheading font-weight-light\">\r\n                Datapoints\r\n              </h2>\r\n              <v-divider></v-divider>\r\n              <v-layout column v-for=\"(dp, indexDp) in selected.datapoints\" :key=\"indexDp\" pt-2>\r\n                <h3 class=\"primary--text body-2\">\r\n                  <a @click=\"navigate({tab:1,datapoint:dp})\">\r\n                    <v-icon style=\"border:1px solid\" class=\"body-2 primary--text ml-2 mr-1\">mdi-call-made</v-icon>\r\n                    {{dp.name}}\r\n                  </a>\r\n                </h3>\r\n                <div class=\"subtitle-2 pl-3\" v-for=\"(f, indexF) in dp.attr\" :key=\"indexF\">\r\n                  <span>\r\n                    <span class=\"font-weight-medium\">\r\n                      <v-icon class=\"subheading pr-1\">{{fieldTypeIcon(f.type)}}</v-icon>\r\n                      {{f.name}} :\r\n                    </span>\r\n                    <span class=\"font-weight-light font-italic\">{{f.type}}</span>\r\n                  </span>\r\n                  <span v-if=\"f.reference\">( ref to\r\n                    <a @click=\"navigate({tab:2,entity:f.reference.collection})\">\r\n                      <v-icon style=\"border:1px solid\" class=\"body-2 primary--text ml-2 mr-1\">mdi-call-made</v-icon>\r\n                      {{`${f.reference.collection.concept} [ ${f.reference.attr} ]`}}\r\n                    </a>\r\n                    )\r\n                  </span>\r\n                  <span v-if=\"f.type=='time'\">{{`( format: ${f.format} )`}}</span>\r\n                </div>\r\n              </v-layout>\r\n            </div>\r\n          </v-container>\r\n        </v-card>\r\n        <v-card flat style=\"background:transparent !important;\" v-if=\"activeTab == 1 && dpInfo != null\">\r\n          <v-container>\r\n            <v-row class=\"py-1\">\r\n              <v-spacer></v-spacer>\r\n              <v-btn text small color=\"primary\" @click=\"exportCollection(dpInfo)\">download xlsx</v-btn>\r\n            </v-row>\r\n            <h3 class=\"primary--text subheading font-weight-light\">{{dpInfo.name}} ( {{dpInfo.count}} items )</h3>\r\n            <v-divider></v-divider>\r\n            <div class=\"subtitle-2\" v-for=\"(f, indexF) in dpInfo.attr\" :key=\"indexF\">\r\n              <span>\r\n                <span class=\"font-weight-medium\">\r\n                  <v-icon class=\"subheading pr-1\">{{fieldTypeIcon(f.type)}}</v-icon>\r\n                  {{f.name}} :\r\n                </span>\r\n                <span class=\"font-weight-light font-italic\">{{f.type}}</span>\r\n              </span>\r\n              <span v-if=\"f.ref\">( ref to\r\n                <a @click=\"navigate({tab:2,entity:f.ref.collection})\">\r\n                  <v-icon style=\"border:1px solid\" class=\"body-2 primary--text ml-2 mr-1\">mdi-call-made</v-icon>\r\n                  {{`${f.ref.collection.concept} [ ${f.ref.attr} ]`}}\r\n                </a>\r\n                )\r\n              </span>\r\n              <span v-if=\"f.type=='time'\">{{`( format: ${f.format} )`}}</span>\r\n              <span v-if=\"f.def\">( Value of\r\n                <a @click=\"navigate({tab:0,indicator:f.def})\">\r\n                  <v-icon style=\"border:1px solid\" class=\"body-2 primary--text ml-2 mr-1\">mdi-call-made</v-icon>\r\n                  {{`${f.def.name}.`}}\r\n                </a>\r\n                )\r\n              </span>\r\n            </div>\r\n            <v-row v-if=\"sampleTable\" class=\"mt-3 mx-0 px-0\">\r\n              <v-col>\r\n                <h3 class=\"primary--text subheading font-weight-light\">Sample</h3>\r\n                <v-divider class=\"pb-2\"></v-divider>\r\n                <v-data-table :headers=\"sampleTable.headers\" :items=\"sampleTable.rows\" dense calculate-widths :items-per-page=\"Number.POSITIVE_INFINITY\" hide-default-footer style=\"display: inline-grid;\">\r\n                  <template v-slot:body=\"props\">\r\n                    <tbody>\r\n                      <tr v-for=\"(item, rowIndex) in props.items\" :key=\"rowIndex\">\r\n                        <td v-for=\"(col, index) in sampleTable.headers\" :key=\"index\" class=\"caption\">\r\n                          {{item[col.value]}}\r\n                        </td>\r\n                      </tr>\r\n                    </tbody>\r\n                  </template>\r\n                </v-data-table>\r\n              </v-col>\r\n            </v-row>\r\n            <v-row v-if=\"dpsExample\" class=\"mt-3 mx-0 px-0\">\r\n              <v-col>\r\n                <h3 class=\"primary--text subheading font-weight-light\">Data Processing Script Example</h3>\r\n                <v-divider class=\"pb-2\"></v-divider>\r\n                <highlight :content=\"dpsExample\" lang=\"dps\" wrap></highlight>\r\n              </v-col>\r\n            </v-row>\r\n          </v-container>\r\n        </v-card>\r\n        <v-card flat style=\"background:transparent !important;\" v-if=\"activeTab == 2 && entityInfo != null\">\r\n          <v-container>\r\n            <v-row class=\"py-1\">\r\n              <v-spacer></v-spacer>\r\n              <v-btn text small color=\"primary\" @click=\"exportCollection(entityInfo)\">download xlsx</v-btn>\r\n            </v-row>\r\n            <h3 class=\"primary--text subheading font-weight-light\">{{entityInfo.name}} ( {{entityInfo.count}} items )</h3>\r\n            <v-divider></v-divider>\r\n            <div class=\"subtitle-2\" v-for=\"(f, indexF) in entityInfo.attr\" :key=\"indexF\">\r\n              <span>\r\n                <span class=\"font-weight-medium\">\r\n                  <v-icon class=\"subheading pr-1\">{{fieldTypeIcon(f.type)}}</v-icon>\r\n                  {{f.name}} :\r\n                </span>\r\n                <span class=\"font-weight-light font-italic\">{{f.type}}</span>\r\n              </span>\r\n              <span v-if=\"f.ref\">( ref to\r\n                <a @click=\"navigate({tab:2,entity:f.ref.collection})\">\r\n                  <v-icon style=\"border:1px solid\" class=\"body-2 primary--text ml-2 mr-1\">mdi-call-made</v-icon>\r\n                  {{`${f.ref.collection.concept} [ ${f.ref.attr} ]`}}\r\n                </a>\r\n                )\r\n              </span>\r\n              <span v-if=\"f.type=='time'\">{{`( format: ${f.format} )`}}</span>\r\n              <span v-if=\"f.def\">( Value of\r\n                <a @click=\"navigate({tab:0,indicator:f.def})\">\r\n                  <v-icon style=\"border:1px solid\" class=\"body-2 primary--text ml-2 mr-1\">mdi-call-made</v-icon>\r\n                  {{`${f.def.name}.`}}\r\n                </a>\r\n                )\r\n              </span>\r\n            </div>\r\n            <v-row v-if=\"entityTable\" class=\"mt-3 mx-0 px-0\">\r\n              <v-col>\r\n                <h3 class=\"primary--text subheading font-weight-light\">Sample</h3>\r\n                <v-divider class=\"pb-2\"></v-divider>\r\n                <v-data-table :headers=\"entityTable.headers\" :items=\"entityTable.rows\" dense calculate-widths :items-per-page=\"Number.POSITIVE_INFINITY\" hide-default-footer style=\"display: inline-grid;\">\r\n                  <template v-slot:body=\"props\">\r\n                    <tbody>\r\n                      <tr v-for=\"(item, rowIndex) in props.items\" :key=\"rowIndex\">\r\n                        <td v-for=\"(col, index) in entityTable.headers\" :key=\"index\" class=\"caption\">\r\n                          {{item[col.value]}}\r\n                        </td>\r\n                      </tr>\r\n                    </tbody>\r\n                  </template>\r\n                </v-data-table>\r\n              </v-col>\r\n            </v-row>\r\n            <v-row v-if=\"dpsEntityExample\" class=\"mt-3 mx-0 px-0\">\r\n              <v-col>\r\n                <h3 class=\"primary--text subheading font-weight-light\">Data Processing Script Example</h3>\r\n                <v-divider class=\"pb-2\"></v-divider>\r\n                <highlight :content=\"dpsEntityExample\" lang=\"dps\" wrap></highlight>\r\n              </v-col>\r\n            </v-row>\r\n          </v-container>\r\n        </v-card>\r\n      </v-col>\r\n    </v-row>\r\n    <v-divider></v-divider>\r\n  </v-card>\r\n</template>\r\n<script>\r\nimport djvueMixin from \"@/mixins/core/djvue.mixin.js\";\r\nimport listenerMixin from \"@/mixins/core/listener.mixin.js\";\r\nimport ioMixin from \"./io.mixin.js\";\r\n\r\n\r\n  import dsExplorerConfig from \"./ds-explorer-config.vue\"\r\n\r\n\r\nimport highlight from '@/components/core/ext/ace-highlight.vue';\r\nimport { find } from \"lodash\"\r\n\r\n\r\n\r\nlet getTopicNode = (items, path) => {\r\n  let r = find(items, n => n.name == path[0])\r\n  if (path.length == 1) {\r\n    return r\r\n  } else {\r\n    path.splice(0, 1)\r\n    return getTopicNode(r.children, path)\r\n  }\r\n}\r\n\r\nlet getOpenPath = (items, path) => {\r\n  let r = find(items, n => n.name == path[0])\r\n  if (path.length == 1) {\r\n    return [r.key]\r\n  } else {\r\n    path.splice(0, 1)\r\n    return [r.key].concat(getOpenPath(r.children, path))\r\n  }\r\n}\r\n\r\n\r\n\r\nexport default {\r\n\r\n  name: \"ds-explorer-widget\",\r\n\r\n  icon: \"mdi-database\",\r\n\r\n  mixins: [djvueMixin, listenerMixin, ioMixin],\r\n\r\n  components: { highlight },\r\n\r\n  methods: {\r\n\r\n    fieldTypeIcon(type) {\r\n      let map = {\r\n        \"string\": \"mdi-format-color-text\",\r\n        \"text\": \"mdi-format-color-text\",\r\n        \"time\": \"mdi-clock-outline\",\r\n        \"float\": \"mdi-numeric\",\r\n        \"int\": \"mdi-numeric\",\r\n        \"integer\": \"mdi-numeric\",\r\n        \"number\": \"mdi-numeric\",\r\n        \"geojson\": \"mdi-map-marker-outline\",\r\n        \"geo\": \"mdi-map-marker-outline\",\r\n        \"geometry\": \"mdi-map-marker-outline\"\r\n      }\r\n      let res = map[type]\r\n      return (res) ? res : \"mdi-alpha-f\"\r\n    },\r\n\r\n    exportCollection(c) {\r\n      this.dpsDownloadCollection(c)\r\n        .then(url => {\r\n          window.location.href = url\r\n        })\r\n    },\r\n\r\n    navigate({ tab, indicator, datapoint, entity }) {\r\n\r\n      if (tab == 0) {\r\n        if (indicator.topic) {\r\n          let node = getTopicNode(this.items, indicator.topic.split(\":\"))\r\n          if (node.children.length == 0) {\r\n            this.loadIndicators(node)\r\n              .then(() => {\r\n                this.selected = getTopicNode(this.items, (indicator.topic + \":\" + indicator.name).split(\":\"))\r\n                this.open = getOpenPath(this.items, indicator.topic.split(\":\"))\r\n              })\r\n          } else {\r\n            this.selected = getTopicNode(this.items, (indicator.topic + \":\" + indicator.name).split(\":\"))\r\n            this.open = getOpenPath(this.items, indicator.topic.split(\":\"))\r\n          }\r\n        }\r\n      }\r\n      if (tab == 1) this.selectedDp = datapoint\r\n      if (tab == 2) this.selectedEntity = entity\r\n\r\n      this.activeTab = tab\r\n    },\r\n\r\n    loadEntityInfo(metadata, e) {\r\n      this.dpsLoadEntityInfo(metadata, e)\r\n        .then(res => {\r\n          this.entityInfo = res\r\n          this.message = null\r\n        })\r\n        .catch(() => {\r\n          this.message = \"Cannot load entity Info\"\r\n        })\r\n    },\r\n\r\n    loadDatapointInfo(metadata, dp) {\r\n      this.dpsLoadDatapointInfo(metadata, dp)\r\n        .then(res => {\r\n          this.dpInfo = res\r\n          this.message = null\r\n          // console.log(res)\r\n        })\r\n        .catch(() => {\r\n          this.message = \"Cannot load datapoint Info\"\r\n        })\r\n    },\r\n\r\n    loadDatapoints(metadata) {\r\n      this.dpsLoadDatapoints(metadata)\r\n        .then(res => {\r\n          this.datapoints = res\r\n          // this.message = null\r\n          this.error2 = false\r\n        })\r\n        .catch(() => {\r\n          this.error2 = true\r\n          this.message = \"Cannot load datapoints\"\r\n        })\r\n    },\r\n\r\n    loadEntities(metadata) {\r\n      this.dpsLoadEntities(metadata)\r\n        .then(res => {\r\n          this.error3 = false\r\n          this.entities = res\r\n          // this.message = null\r\n        })\r\n        .catch(() => {\r\n          this.error3 = true\r\n          this.message = \"Cannot load entities\"\r\n        })\r\n    },\r\n\r\n\r\n    indicatorClass(item) {\r\n      return (!this.selected) ?\r\n        'subtitle-2 font-weight-light' :\r\n        (item.id != this.selected.id) ? 'subtitle-2 font-weight-light secondary--text' : 'subtitle-2 primary--text'\r\n    },\r\n\r\n    loadSample(metadata, dp) {\r\n      this.dpsLoadSample(metadata, dp)\r\n        .then(res => {\r\n          this.sample = res\r\n          this.dpsExample = `// fetch ${dp.concept} collection\r\ndml.select(from:\"${dp.concept}\")\r\n// limit rows count\r\ncollection.limit(5)`\r\n        })\r\n    },\r\n\r\n    loadEntitySample(metadata, e) {\r\n      this.dpsLoadEntitySample(metadata, e)\r\n        .then(res => {\r\n          this.entitySample = res\r\n          this.dpsEntityExample = `// fetch ${e.concept} collection\r\ndml.select(from:\"${e.concept}\")\r\n// limit rows count\r\ncollection.limit(5)`\r\n        })\r\n    },\r\n\r\n\r\n    loadIndicators(p) {\r\n      return this.dpsLoadIndicators(this.config.metadata, p)\r\n        .then(res => {\r\n          // this.error2 = false;\r\n          // this.message = null\r\n          p.children = res\r\n          this.items = JSON.parse(JSON.stringify(this.items))\r\n          \r\n          console.log(\"indicators\",this.items)\r\n\r\n          return this.items\r\n        })\r\n        .catch(() => {\r\n          // this.error2 = true;\r\n          this.message = \"Cannot load indicators\"\r\n        })\r\n    },\r\n\r\n    normalize(data) {\r\n\r\n      let f = d => {\r\n        d = d.map(item => {\r\n          if (item.children) {\r\n            item.children = f(item.children)\r\n          } else {\r\n            item.children = []\r\n          }\r\n          item.key = this.$djvue.randomName()\r\n          return item\r\n        })\r\n        return d\r\n      }\r\n      return f(data)\r\n    },\r\n\r\n    select(item) {\r\n      if (!this.selected) {\r\n        this.selected = item\r\n      } else {\r\n        this.selected = item //(this.selected.id == item.id) ? null : item\r\n      }\r\n    },\r\n\r\n    selectDatapoint(item) {\r\n      if (!this.selectedDp) {\r\n        this.selectedDp = item\r\n      } else {\r\n        this.selectedDp = item //(this.selectedDp.id == item.id) ? null : item\r\n      }\r\n    },\r\n\r\n    selectEntity(item) {\r\n      if (!this.selectedEntity) {\r\n        this.selectedEntity = item\r\n      } else {\r\n        this.selectedEntity = item //(this.selectedEntity.id == item.id) ? null : item\r\n      }\r\n    },\r\n\r\n    // onUpdate({ data, options }) {\r\n    //   // console.log(\"OnUpdate\", data, options)\r\n    //   // data = this.normalize(data)\r\n    //   // this.items = data;\r\n    // },\r\n\r\n    loadConcepts(metadata) {\r\n      this.dpsLoadConcepts(metadata)\r\n        .then(res => {\r\n          // this.message = null\r\n          this.error1 = false\r\n          this.items = this.normalize(res)\r\n          console.log(\"indicators\",this.items)\r\n\r\n\r\n        })\r\n        .catch(() => {\r\n          this.error1 = true;\r\n          this.message = \"Cannot load concepts\"\r\n        })\r\n    },\r\n\r\n\r\n    onReconfigure(widgetConfig) {\r\n      return this.$dialogManager.showAndWait(dsExplorerConfig, { width: \"80%\" }, { config: widgetConfig })\r\n    }\r\n    \r\n\r\n  },\r\n\r\n\r\n  props: [\"config\"],\r\n\r\n  computed: {\r\n\r\n    sampleTable() {\r\n      if (!this.sample) return null\r\n      return {\r\n        headers: this.sample.dataset.dimensions.map(item => ({\r\n          text: item,\r\n          align: 'center',\r\n          value: item\r\n        })),\r\n        rows: this.sample.dataset.source\r\n      }\r\n    },\r\n\r\n    entityTable() {\r\n      if (!this.entitySample) return null\r\n      return {\r\n        headers: this.entitySample.dataset.dimensions.map(item => ({\r\n          text: item,\r\n          align: 'center',\r\n          value: item\r\n        })),\r\n        rows: this.entitySample.dataset.source\r\n      }\r\n    }\r\n\r\n  },\r\n\r\n  watch: {\r\n\r\n    selectedDp(newValue) {\r\n      // console.log(newValue, oldValue)\r\n      // if (newValue == oldValue) return\r\n      if (newValue) {\r\n        this.loadSample(this.config.metadata, newValue)\r\n        this.loadDatapointInfo(this.config.metadata, newValue)\r\n        // console.log(\"selectedDp\",newValue)\r\n      }\r\n      // else {\r\n      //   this.sample = null\r\n      //   this.dpInfo = null\r\n      // }\r\n    },\r\n\r\n    selectedEntity(newValue) {\r\n      // console.log(newValue)\r\n      // if (newValue == oldValue) return\r\n      if (newValue) {\r\n        this.loadEntitySample(this.config.metadata, newValue)\r\n        this.loadEntityInfo(this.config.metadata, newValue)\r\n      }\r\n      // else {\r\n      //   this.entityInfo = null\r\n      //   this.entitySample = null\r\n      // }\r\n    },\r\n\r\n    \"config.metadata\": {\r\n      handler(newValue) {\r\n        if (newValue.concepts && newValue.collections) {\r\n          this.error1 = true\r\n          this.message = \"Loading...\"\r\n          this.loadConcepts(newValue);\r\n          this.loadDatapoints(newValue);\r\n          this.loadEntities(newValue);\r\n        } else {\r\n          this.error1 = true\r\n          this.message = \"No data available\"\r\n        }\r\n      },\r\n      deep: true\r\n    }\r\n\r\n\r\n\r\n  },\r\n\r\n  created() {\r\n    if (this.config.metadata && this.config.metadata.concepts && this.config.metadata.collections) {\r\n      this.error1 = true\r\n      this.message = \"Loading...\"\r\n      this.loadConcepts(this.config.metadata);\r\n      this.loadDatapoints(this.config.metadata);\r\n      this.loadEntities(this.config.metadata);\r\n    } else {\r\n      this.message = \"No data available\"\r\n      this.error1 = true\r\n    }\r\n  },\r\n\r\n  mounted() { this.$emit(\"init\") },\r\n\r\n  data: () => ({\r\n    items: null,\r\n    open: [],\r\n    active: [],\r\n    selected: null,\r\n    activeTab: null,\r\n    datapoints: null,\r\n    selectedDp: null,\r\n    sample: null,\r\n    dpsExample: null,\r\n    dpInfo: null,\r\n    entities: null,\r\n    selectedEntity: null,\r\n    entitySample: null,\r\n    dpsEntityExample: null,\r\n    entityInfo: null,\r\n    title: \"World Development Indicators\",\r\n    message: \"Loading...\",\r\n    error1: false,\r\n    error2: false,\r\n    error3: false\r\n  })\r\n}\r\n\r\n</script>\r\n<style>\r\n.theme--light.v-tabs>.v-tabs-bar {\r\n  background-color: transparent !important;\r\n}\r\n\r\n.theme--light.v-tabs-items {\r\n  background-color: transparent !important;\r\n}\r\n\r\n.v-treeview--dense .v-treeview-node__root {\r\n  min-height: 1.3em !important;\r\n}\r\n\r\n</style>\r\n","import mod from \"-!../../../../build/vuetify-loader/lib/loader.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../build/jace-loader/src/parser.js??ref--20-3!../../../../build/jace-loader/src/parser.js??ref--18-1!../../../../build/jace-loader/src/parser.js??ref--33-1!./ds-explorer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../build/vuetify-loader/lib/loader.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../build/jace-loader/src/parser.js??ref--20-3!../../../../build/jace-loader/src/parser.js??ref--18-1!../../../../build/jace-loader/src/parser.js??ref--33-1!./ds-explorer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ds-explorer.vue?vue&type=template&id=af5fa704&\"\nimport script from \"./ds-explorer.vue?vue&type=script&lang=js&\"\nexport * from \"./ds-explorer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ds-explorer.vue?vue&type=style&index=0&id=af5fa704&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../build/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDataTable } from 'vuetify/lib/components/VDataTable';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VLayout } from 'vuetify/lib/components/VGrid';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTab } from 'vuetify/lib/components/VTabs';\nimport { VTabItem } from 'vuetify/lib/components/VTabs';\nimport { VTabs } from 'vuetify/lib/components/VTabs';\nimport { VTreeview } from 'vuetify/lib/components/VTreeview';\ninstallComponents(component, {VBtn,VCard,VCol,VContainer,VDataTable,VDivider,VIcon,VLayout,VRow,VSpacer,VTab,VTabItem,VTabs,VTreeview})\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../build/vuetify-loader/lib/loader.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../build/jace-loader/src/parser.js??ref--20-3!../../../../build/jace-loader/src/parser.js??ref--33-1!./ds-explorer.vue?vue&type=style&index=0&id=af5fa704&prod&lang=css&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('v-flex',{attrs:{\"xs12\":\"\"}},[_vm._v(\"\\n    \"+_vm._s(_vm.wrap)+\"\\n  \"),_c('div',{staticClass:\"editor\",style:((_vm.wrap || _vm.wrap=='') ? 'height:auto !important':''),domProps:{\"innerHTML\":_vm._s(_vm.highlighted.html)}})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-flex xs12>\r\n      {{wrap}}\r\n    <div class=\"editor\" :style=\"(wrap || wrap=='') ? 'height:auto !important':''\" v-html=\"highlighted.html\"></div>\r\n  </v-flex>  \r\n</template>\r\n\r\n<script>\r\n\r\n\r\n\r\n  export default {\r\n    \r\n    name:\"editor\",\r\n\r\n    props:[\"content\",\"lang\",\"theme\",\"wrap\"], \r\n    \r\n    data: () => ({\r\n        highlighted: null,\r\n        highlight:null\r\n    }),\r\n\r\n    methods:{\r\n    },\r\n\r\n    created() {\r\n      // const vm = this;\r\n      // var lang = vm.lang;\r\n      // var theme = vm.theme;\r\n     \r\n      this.highlight = window.ace.require(\"ace/ext/static_highlight\");\r\n\r\n\r\n      let mode = window.ace.require(\"ace/mode/\"+ this.lang);\r\n      console.log(\"created \",mode)\r\n      mode = (mode) ? mode.Mode : mode;  \r\n      \r\n      let theme = window.ace.require(\"ace/theme/tomorrow\");\r\n      \r\n      if(!mode){\r\n          window.console.error(\"Highlighter mode: \"+this.lang+\" not supported\")\r\n          return\r\n      }\r\n      \r\n      if(!theme){\r\n          window.console.error(\"Highlighter theme: \"+this.theme+\" not supported\")\r\n      }\r\n\r\n      // let content = (this.content) ? JSON.parse(JSON.stringify(this.content)) : \"\"\r\n\r\n      this.highlighted = this.highlight.renderSync(\r\n              this.content,\r\n              new mode(),\r\n              theme\r\n      );\r\n      // console.log(this.highlighted.css)\r\n      // console.log(this.highlighted.html)\r\n      \r\n      \r\n\r\n      window.ace.require(\"ace/lib/dom\").importCssString(\r\n          this.highlighted.css\r\n              .replace(\"font-size: 12px;\",\"\")\r\n              .replace(\r\n                  \".ace_static_highlight .ace_gutter-cell:before {\",\r\n                  \".ace_static_highlight .ace_gutter-cell:before { font-size: xx-small; padding-right: 0.5em; \"\r\n              ),\r\n          \"ace_highlight\"\r\n      );     \r\n      \r\n      this.$emit(\"mount\")\r\n\r\n      // elm.html(highlighted.html)\r\n// var session = vm.session = editor.getSession();\r\n// editor.$blockScrolling = Infinity;\r\n// session.setMode('ace/mode/' + lang);\r\n// editor.setTheme('ace/theme/' + theme);\r\n// session.setValue(vm.content, 1);\r\n// session.on('change', () => {\r\n// vm.$emit('change', session.getValue());\r\n// });\r\n\r\n     \r\n    },\r\n\r\n    watch: {\r\n      \r\n      content: function (newContent) {\r\n        let mode = window.ace.require(\"ace/mode/\"+ this.lang);\r\n        console.log(mode)\r\n        mode = (mode) ? mode.Mode : mode;  \r\n        let theme = window.ace.require(\"ace/theme/tomorrow\");\r\n        \r\n        if(!mode){\r\n            window.console.error(\"Highlighter mode: \"+this.lang+\" not supported\")\r\n            return\r\n        }\r\n        \r\n        if(!theme){\r\n            window.console.error(\"Highlighter theme: \"+this.theme+\" not supported\")\r\n        }\r\n\r\n        let content = (newContent) ? JSON.parse(JSON.stringify(newContent)) : \"\"\r\n\r\n        this.highlighted = this.highlight.renderSync(\r\n                content,\r\n                new mode(),\r\n                theme\r\n        );\r\n        \r\n        window.ace.require(\"ace/lib/dom\").importCssString(\r\n            this.highlighted.css\r\n                .replace(\"font-size: 12px;\",\"\")\r\n                .replace(\r\n                    \".ace_static_highlight .ace_gutter-cell:before {\",\r\n                    \".ace_static_highlight .ace_gutter-cell:before { font-size: xx-small; padding-right: 0.5em; \"\r\n                ),\r\n            \"ace_highlight\"\r\n        );     \r\n      },\r\n\r\n      // theme: function (newTheme) {\r\n      //   const vm = this;\r\n      //   vm.editor.setTheme('ace/theme/' + newTheme);\r\n      // }\r\n    }\r\n  }\r\n\r\n</script>\r\n\r\n<style scoped>\r\n  .editor {\r\n    width: 100%;\r\n    font-size: 14px;\r\n    border: 1px solid #dedede;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../../build/vuetify-loader/lib/loader.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../build/jace-loader/src/parser.js??ref--20-3!../../../../build/jace-loader/src/parser.js??ref--18-1!../../../../build/jace-loader/src/parser.js??ref--33-1!./ace-highlight.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../build/vuetify-loader/lib/loader.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../build/jace-loader/src/parser.js??ref--20-3!../../../../build/jace-loader/src/parser.js??ref--18-1!../../../../build/jace-loader/src/parser.js??ref--33-1!./ace-highlight.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ace-highlight.vue?vue&type=template&id=4067c51e&scoped=true&\"\nimport script from \"./ace-highlight.vue?vue&type=script&lang=js&\"\nexport * from \"./ace-highlight.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ace-highlight.vue?vue&type=style&index=0&id=4067c51e&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4067c51e\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../build/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VFlex } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VFlex})\n","import \"../../../src/components/VGrid/_grid.sass\";\nimport \"../../../src/components/VGrid/VGrid.sass\";\nimport Grid from './grid';\nimport mergeData from '../../util/mergeData';\n/* @vue/component */\n\nexport default Grid('container').extend({\n  name: 'v-container',\n  functional: true,\n  props: {\n    id: String,\n    tag: {\n      type: String,\n      default: 'div'\n    },\n    fluid: {\n      type: Boolean,\n      default: false\n    }\n  },\n\n  render(h, {\n    props,\n    data,\n    children\n  }) {\n    let classes;\n    const {\n      attrs\n    } = data;\n\n    if (attrs) {\n      // reset attrs to extract utility clases like pa-3\n      data.attrs = {};\n      classes = Object.keys(attrs).filter(key => {\n        // TODO: Remove once resolved\n        // https://github.com/vuejs/vue/issues/7841\n        if (key === 'slot') return false;\n        const value = attrs[key]; // add back data attributes like data-test=\"foo\" but do not\n        // add them as classes\n\n        if (key.startsWith('data-')) {\n          data.attrs[key] = value;\n          return false;\n        }\n\n        return value || typeof value === 'string';\n      });\n    }\n\n    if (props.id) {\n      data.domProps = data.domProps || {};\n      data.domProps.id = props.id;\n    }\n\n    return h(props.tag, mergeData(data, {\n      staticClass: 'container',\n      class: Array({\n        'container--fluid': props.fluid\n      }).concat(classes || [])\n    }), children);\n  }\n\n});\n//# sourceMappingURL=VContainer.js.map","// Extensions\nimport VWindowItem from '../VWindow/VWindowItem';\n/* @vue/component */\n\nexport default VWindowItem.extend({\n  name: 'v-tab-item',\n  props: {\n    id: String\n  },\n  methods: {\n    genWindowItem() {\n      const item = VWindowItem.options.methods.genWindowItem.call(this);\n      item.data.domProps = item.data.domProps || {};\n      item.data.domProps.id = this.id || this.value;\n      return item;\n    }\n\n  }\n});\n//# sourceMappingURL=VTabItem.js.map"],"sourceRoot":""}