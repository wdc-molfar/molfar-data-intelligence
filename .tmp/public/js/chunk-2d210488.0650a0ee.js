(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d210488"],{b6db:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t._self._c;return t.options?e("annotator",{ref:"annotator",attrs:{id:t.config.id,data:t.options.document,options:t.getOptions},on:{select:t.onSelectNodes}}):t._e()},o=[],s=n("c4a7"),l=n("99a8"),c=n("c555"),r=n("4e14"),a=n("2ef0"),d=n("029e"),h=function(){var t=this,e=t._self._c;return e("config-dialog",{attrs:{options:t.props,submit:t.submit}})},p=[],u=n("a410"),g={name:"NlpResolverConfig",components:{"config-dialog":u["a"]},props:["options","submit"],computed:{props(){return{icon:this.options.config.icon,title:`html-widget: ${this.options.config.id} ${this.options.config.name}`,config:this.options.config,editorTree:this.editorTree}}},data(){return{editorTree:[{name:"Configuration",children:[{name:"Widget",editor:()=>n.e("chunk-2d226cca").then(n.bind(null,"e9cc"))},{name:"Style",editor:()=>n.e("chunk-55e9e634").then(n.bind(null,"c59e"))},{name:"Options",editor:()=>Promise.all([n.e("chunk-3d2e32d9"),n.e("chunk-0ad95c16")]).then(n.bind(null,"41f1"))}]}]}}},m=g,f=n("2877"),v=Object(f["a"])(m,h,p,!1,null,null,null),b=v.exports;let O=(t,e)=>{a["templateSettings"].interpolate=/{{([\s\S]+?)}}/g;let n=Object(a["template"])(t)(e);return a["templateSettings"].interpolate=/<%=([\s\S]+?)%>/g,n};var j={name:"nlp-resolver-widget",components:{annotator:s["a"]},icon:"mdi-source-merge",mixins:[c["a"],r["a"]],props:["config"],data:()=>({options:null}),methods:{getDocument(){return this.options.document},getDecoration(){return this.options.decoration},getAvailableAnnotation(){return this.options.availableAnnotation},getSelection(){return this.options.selection},getEvents(){return this.options.events},getUtils(){return l},getData(){return this.options},onSelectNodes(t){if(this.options.events){let e=this.options.events.select||"select-nodes";this.emit(e,t,this)}},createAnnotation(t){return e=>{if(0==e.length)return;let n=l["getParent"](e[0],this.options.document),i=Object(a["findIndex"])(n.childs,t=>t.id==e[0].id),o=Object(a["findIndex"])(n.childs,t=>t.id==e[e.length-1].id),s=n.childs.splice(i,o-i+1),c={type:t,childs:s,id:`${this.config.id}-${Object(d["v4"])()}`};if(n.childs.splice(i,0,c),this.$nextTick(()=>{this.$refs.annotator.select(c)}),this.options.events){let t=this.options.events.create||"create-annotation";this.emit(t,c,this)}if(this.options.events){let t=this.options.events.change||"change-document";this.emit(t,this.options.document,this)}}},nestingTest(t,e){let n=this.options.availableAnnotation[e];if(!n)return!0;n.nestedIn=n.nestedIn||[];let i=l["getParent"](t,this.options.document);return i&&n.nestedIn.includes(i.type)||0==n.nestedIn.length},_remove(t){if(0==t.length||t.length>1)return;let e=l["getParent"](t[0],this.options.document);if(e){let n=Object(a["findIndex"])(e.childs,e=>e.id==t[0].id);e.childs.splice(n,1),e.childs.splice(n,0,t[0].childs),e.childs=Object(a["flattenDeep"])(e.childs),e.childs.forEach(t=>{this.nestingTest(t,t.type)||this._remove([t])})}if(this.options.events){let e=this.options.events.remove||"remove-annotation";this.emit(e,t[0],this)}if(this.options.events){let t=this.options.events.change||"change-document";this.emit(t,this.options.document,this)}},removeAnnotation(t){this._remove(t),this.$refs.annotator.select(t[0].childs),this.onUpdate({data:this.options})},resolveBranch(t){let e=t[0],n=l["getParent"](e,this.options.document),i=l["getParent"](n,this.options.document);i.childs.splice(Object(a["findIndex"])(i.childs,t=>t.id==n.id),1,e.childs),i.childs=Object(a["flatten"])(i.childs),this.onUpdate({data:this.options})},getOptions(){if(!this.config)return{};let t=this;return{availableSelectionMode(){return["singly","bundly"]},menu(e){if(e)return"BRANCH"==e.type?[{title:e.name,action:t.resolveBranch,icon:"mdi-source-pull"}]:null},selectable(t){return t&&"BRANCH"==t.type?["singly","wrap"]:null},classes(e){return e&&t.options&&t.options.decoration.classes?t.options.decoration.classes[e.type]:null},color(e){return e&&t.options&&t.options.decoration.color?t.options.decoration.color[e.type]:null},label(e){return e&&t.options&&t.options.decoration.label?O(t.options.decoration.label[e.type],{node:e}):null},tooltip(e){return t.options&&e&&t.options&&t.options.decoration.tooltip&&t.options.decoration.tooltip[e.type]?O(t.options.decoration.tooltip[e.type],{node:e}):null}}},onUpdate({data:t},e){e?(e.override&&Object(a["set"])(this,e.override,t),e.extend&&Object(a["set"])(this,e.extend,Object(a["extend"])(Object(a["get"])(this,e.extend),t))):this.options=t;let n=this.options;this.options=null,this.$nextTick(()=>{if(this.options=n,this.options.events){let t=this.options.events.change||"change-document";this.emit(t,this.options.document,this)}})},onReconfigure(t){return this.$dialogManager.showAndWait(b,{width:"90%"},{config:t})}},created(){},mounted(){this.$emit("init")}},y=j,x=Object(f["a"])(y,i,o,!1,null,null,null);e["default"]=x.exports}}]);
//# sourceMappingURL=chunk-2d210488.0650a0ee.js.map